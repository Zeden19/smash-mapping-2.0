import{s as On,n as Ln,o as $i,f as Ks,h as Tt,r as xs,i as es,b as et,j as tt}from"../chunks/scheduler.2780c2e6.js";import{S as Cn,i as xn,g,h as y,x as A,k as w,l as tn,a as Ie,f as P,s as Q,m as St,j as ce,c as ee,n as Nt,A as N,z as v,B as nn,C as Be,D as Bi,E as qn,F as Vn,G as ts,y as Ze,d as ve,p as Gt,t as je,b as Ht,H as $n,e as Bn,I as dr,o as fn,J as nt,r as zn,K as fr,u as Gn,v as Hn,w as Jn}from"../chunks/index.bfa20e3f.js";import{_ as Kn}from"../chunks/preload-helper.41c905a7.js";function pr(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in s)){const r=Object.getOwnPropertyDescriptor(n,i);r&&Object.defineProperty(s,i,r.get?r:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}function Ys(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}var mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qi(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var vr=function s(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!s(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){var o=r[i];if(!s(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const Ws=qi(vr),Zs=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],ns=1,un=8;class ks{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(i!==ns)throw new Error(`Got v${i} data when expected v${ns}.`);const r=Zs[n&15];if(!r)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[l]=new Uint32Array(e,4,1);return new ks(l,o,r,e)}constructor(e,t=64,n=Float64Array,i){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const r=Zs.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,l=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-l%8)%8;if(r<0)throw new Error(`Unexpected typed array class: ${n}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,un,e),this.coords=new this.ArrayType(this.data,un+l+a,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(un+o+l+a),this.ids=new this.IndexArrayType(this.data,un,e),this.coords=new this.ArrayType(this.data,un+l+a,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(ns<<4)+r]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return vs(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:o,nodeSize:l}=this,a=[0,r.length-1,0],u=[];for(;a.length;){const c=a.pop()||0,h=a.pop()||0,d=a.pop()||0;if(h-d<=l){for(let b=d;b<=h;b++){const T=o[2*b],E=o[2*b+1];T>=e&&T<=n&&E>=t&&E<=i&&u.push(r[b])}continue}const p=d+h>>1,f=o[2*p],m=o[2*p+1];f>=e&&f<=n&&m>=t&&m<=i&&u.push(r[p]),(c===0?e<=f:t<=m)&&(a.push(d),a.push(p-1),a.push(1-c)),(c===0?n>=f:i>=m)&&(a.push(p+1),a.push(h),a.push(1-c))}return u}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:r,nodeSize:o}=this,l=[0,i.length-1,0],a=[],u=n*n;for(;l.length;){const c=l.pop()||0,h=l.pop()||0,d=l.pop()||0;if(h-d<=o){for(let b=d;b<=h;b++)Xs(r[2*b],r[2*b+1],e,t)<=u&&a.push(i[b]);continue}const p=d+h>>1,f=r[2*p],m=r[2*p+1];Xs(f,m,e,t)<=u&&a.push(i[p]),(c===0?e-n<=f:t-n<=m)&&(l.push(d),l.push(p-1),l.push(1-c)),(c===0?e+n>=f:t+n>=m)&&(l.push(p+1),l.push(h),l.push(1-c))}return a}}function vs(s,e,t,n,i,r){if(i-n<=t)return;const o=n+i>>1;Vi(s,e,o,n,i,r),vs(s,e,t,n,o-1,1-r),vs(s,e,t,o+1,i,1-r)}function Vi(s,e,t,n,i,r){for(;i>n;){if(i-n>600){const u=i-n+1,c=t-n+1,h=Math.log(u),d=.5*Math.exp(2*h/3),p=.5*Math.sqrt(h*d*(u-d)/u)*(c-u/2<0?-1:1),f=Math.max(n,Math.floor(t-c*d/u+p)),m=Math.min(i,Math.floor(t+(u-c)*d/u+p));Vi(s,e,t,f,m,r)}const o=e[2*t+r];let l=n,a=i;for(hn(s,e,n,t),e[2*i+r]>o&&hn(s,e,n,i);l<a;){for(hn(s,e,l,a),l++,a--;e[2*l+r]<o;)l++;for(;e[2*a+r]>o;)a--}e[2*n+r]===o?hn(s,e,n,a):(a++,hn(s,e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}}function hn(s,e,t,n){ss(s,t,n),ss(e,2*t,2*n),ss(e,2*t+1,2*n+1)}function ss(s,e,t){const n=s[e];s[e]=s[t],s[t]=n}function Xs(s,e,t,n){const i=s-t,r=e-n;return i*i+r*r}const _r={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:s=>s},Qs=Math.fround||(s=>e=>(s[0]=+e,s[0]))(new Float32Array(1)),$t=2,kt=3,is=4,xt=5,zi=6;class gr{constructor(e){this.options=Object.assign(Object.create(_r),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:i}=this.options;t&&console.time("total time");const r=`prepare ${e.length} points`;t&&console.time(r),this.points=e;const o=[];for(let a=0;a<e.length;a++){const u=e[a];if(!u.geometry)continue;const[c,h]=u.geometry.coordinates,d=Qs(An(c)),p=Qs(In(h));o.push(d,p,1/0,a,-1,1),this.options.reduce&&o.push(0)}let l=this.trees[i+1]=this._createTree(o);t&&console.timeEnd(r);for(let a=i;a>=n;a--){const u=+Date.now();l=this.trees[a]=this._createTree(this._cluster(l,a)),t&&console.log("z%d: %d clusters in %dms",a,l.numItems,+Date.now()-u)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let r=e[2]===180?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,r=180;else if(n>r){const h=this.getClusters([n,i,180,o],t),d=this.getClusters([-180,i,r,o],t);return h.concat(d)}const l=this.trees[this._limitZoom(t)],a=l.range(An(n),In(o),An(r),In(i)),u=l.data,c=[];for(const h of a){const d=this.stride*h;c.push(u[d+xt]>1?ei(u,d,this.clusterProps):this.points[u[d+kt]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.data;if(t*this.stride>=o.length)throw new Error(i);const l=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=o[t*this.stride],u=o[t*this.stride+1],c=r.within(a,u,l),h=[];for(const d of c){const p=d*this.stride;o[p+is]===e&&h.push(o[p+xt]>1?ei(o,p,this.clusterProps):this.points[o[p+kt]])}if(h.length===0)throw new Error(i);return h}getLeaves(e,t,n){t=t||10,n=n||0;const i=[];return this._appendLeaves(i,e,t,n,0),i}getTile(e,t,n){const i=this.trees[this._limitZoom(e)],r=Math.pow(2,e),{extent:o,radius:l}=this.options,a=l/o,u=(n-a)/r,c=(n+1+a)/r,h={features:[]};return this._addTileFeatures(i.range((t-a)/r,u,(t+1+a)/r,c),i.data,t,n,r,h),t===0&&this._addTileFeatures(i.range(1-a/r,u,1,c),i.data,r,n,r,h),t===r-1&&this._addTileFeatures(i.range(0,u,a/r,c),i.data,-1,n,r,h),h.features.length?h:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,n.length!==1)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,i,r){const o=this.getChildren(t);for(const l of o){const a=l.properties;if(a&&a.cluster?r+a.point_count<=i?r+=a.point_count:r=this._appendLeaves(e,a.cluster_id,n,i,r):r<i?r++:e.push(l),e.length===n)break}return r}_createTree(e){const t=new ks(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,i,r,o){for(const l of e){const a=l*this.stride,u=t[a+xt]>1;let c,h,d;if(u)c=Gi(t,a,this.clusterProps),h=t[a],d=t[a+1];else{const m=this.points[t[a+kt]];c=m.properties;const[b,T]=m.geometry.coordinates;h=An(b),d=In(T)}const p={type:1,geometry:[[Math.round(this.options.extent*(h*r-n)),Math.round(this.options.extent*(d*r-i))]],tags:c};let f;u||this.options.generateId?f=t[a+kt]:f=this.points[t[a+kt]].id,f!==void 0&&(p.id=f),o.features.push(p)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:i,reduce:r,minPoints:o}=this.options,l=n/(i*Math.pow(2,t)),a=e.data,u=[],c=this.stride;for(let h=0;h<a.length;h+=c){if(a[h+$t]<=t)continue;a[h+$t]=t;const d=a[h],p=a[h+1],f=e.within(a[h],a[h+1],l),m=a[h+xt];let b=m;for(const T of f){const E=T*c;a[E+$t]>t&&(b+=a[E+xt])}if(b>m&&b>=o){let T=d*m,E=p*m,k,I=-1;const F=((h/c|0)<<5)+(t+1)+this.points.length;for(const Y of f){const j=Y*c;if(a[j+$t]<=t)continue;a[j+$t]=t;const S=a[j+xt];T+=a[j]*S,E+=a[j+1]*S,a[j+is]=F,r&&(k||(k=this._map(a,h,!0),I=this.clusterProps.length,this.clusterProps.push(k)),r(k,this._map(a,j)))}a[h+is]=F,u.push(T/b,E/b,1/0,F,-1,b),r&&u.push(I)}else{for(let T=0;T<c;T++)u.push(a[h+T]);if(b>1)for(const T of f){const E=T*c;if(!(a[E+$t]<=t)){a[E+$t]=t;for(let k=0;k<c;k++)u.push(a[E+k])}}}}return u}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+xt]>1){const o=this.clusterProps[e[t+zi]];return n?Object.assign({},o):o}const i=this.points[e[t+kt]].properties,r=this.options.map(i);return n&&r===i?Object.assign({},r):r}}function ei(s,e,t){return{type:"Feature",id:s[e+kt],properties:Gi(s,e,t),geometry:{type:"Point",coordinates:[yr(s[e]),br(s[e+1])]}}}function Gi(s,e,t){const n=s[e+xt],i=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?`${Math.round(n/100)/10}k`:n,r=s[e+zi],o=r===-1?{}:Object.assign({},t[r]);return Object.assign(o,{cluster:!0,cluster_id:s[e+kt],point_count:n,point_count_abbreviated:i})}function An(s){return s/360+.5}function In(s){const e=Math.sin(s*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function yr(s){return(s-.5)*360}function br(s){const e=(180-s*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function wr(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t}class ct{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class _s{constructor({markers:e,position:t}){this.markers=e,t&&(t instanceof google.maps.LatLng?this._position=t:this._position=new google.maps.LatLng(t))}get bounds(){if(this.markers.length===0&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(ct.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>ct.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(ct.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class Tr{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return Er(e)}}const Er=s=>s.map(t=>new _s({position:ct.getPosition(t),markers:[t]}));class Or extends Tr{constructor(e){var{maxZoom:t,radius:n=60}=e,i=wr(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new gr(Object.assign({maxZoom:this.maxZoom,radius:n},i))}calculate(e){let t=!1;const n={zoom:e.map.getZoom()};if(!Ws(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const i=this.markers.map(r=>{const o=ct.getPosition(r);return{type:"Feature",geometry:{type:"Point",coordinates:[o.lng(),o.lat()]},properties:{marker:r}}});this.superCluster.load(i)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!Ws(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(t=>this.transformCluster(t))}transformCluster({geometry:{coordinates:[e,t]},properties:n}){if(n.cluster)return new _s({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map(r=>r.properties.marker),position:{lat:t,lng:e}});const i=n.marker;return new _s({markers:[i],position:ct.getPosition(i)})}}class Cr{constructor(e,t){this.markers={sum:e.length};const n=t.map(r=>r.count),i=n.reduce((r,o)=>r+o,0);this.clusters={count:t.length,markers:{mean:i/t.length,sum:i,min:Math.min(...n),max:Math.max(...n)}}}}class xr{render({count:e,position:t},n,i){const o=`<svg fill="${e>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>
</svg>`,l=`Cluster of ${e} markers`,a=Number(google.maps.Marker.MAX_ZINDEX)+e;if(ct.isAdvancedMarkerAvailable(i)){const c=document.createElement("div");c.innerHTML=o;const h=c.firstElementChild;h.setAttribute("transform","translate(0 25)");const d={map:i,position:t,zIndex:a,title:l,content:h};return new google.maps.marker.AdvancedMarkerElement(d)}const u={position:t,zIndex:a,title:l,icon:{url:`data:image/svg+xml;base64,${btoa(o)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}function kr(s,e){for(let t in e.prototype)s.prototype[t]=e.prototype[t]}class As{constructor(){kr(As,google.maps.OverlayView)}}var vn;(function(s){s.CLUSTERING_BEGIN="clusteringbegin",s.CLUSTERING_END="clusteringend",s.CLUSTER_CLICK="click"})(vn||(vn={}));const Ar=(s,e,t)=>{t.fitBounds(e.bounds)};class Ir extends As{constructor({map:e,markers:t=[],algorithmOptions:n={},algorithm:i=new Or(n),renderer:r=new xr,onClusterClick:o=Ar}){super(),this.markers=[...t],this.clusters=[],this.algorithm=i,this.renderer=r,this.onClusterClick=o,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(n=>{this.addMarker(n,!0)}),t||this.render()}removeMarker(e,t){const n=this.markers.indexOf(e);return n===-1?!1:(ct.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){let n=!1;return e.forEach(i=>{n=this.removeMarker(i,!0)||n}),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,vn.CLUSTERING_BEGIN,this);const{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});(n||n==null)&&(this.reset(),this.clusters=t,this.renderClusters()),google.maps.event.trigger(this,vn.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>ct.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){const e=new Cr(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),this.onClusterClick&&n.marker.addListener("click",i=>{google.maps.event.trigger(this,vn.CLUSTER_CLICK,n),this.onClusterClick(i,n,t)})),ct.setMap(n.marker,t)})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Sr(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})}var Nr=function s(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!s(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){var o=r[i];if(!s(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const ti="__googleMapsScriptId";var sn;(function(s){s[s.INITIALIZED=0]="INITIALIZED",s[s.LOADING=1]="LOADING",s[s.SUCCESS=2]="SUCCESS",s[s.FAILURE=3]="FAILURE"})(sn||(sn={}));class It{constructor({apiKey:e,authReferrerPolicy:t,channel:n,client:i,id:r=ti,language:o,libraries:l=[],mapIds:a,nonce:u,region:c,retries:h=3,url:d="https://maps.googleapis.com/maps/api/js",version:p}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=n,this.client=i,this.id=r||ti,this.language=o,this.libraries=l,this.mapIds=a,this.nonce=u,this.region=c,this.retries=h,this.url=d,this.version=p,It.instance){if(!Nr(this.options,It.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(It.instance.options)}`);return It.instance}It.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?sn.FAILURE:this.done?sn.SUCCESS:this.loading?sn.LOADING:sn.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(n=>{n?t(n.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(r=>!n[r]&&delete n[r]),!((t=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(r=>{let o,l,a,u="The Google Maps JavaScript API",c="google",h="importLibrary",d="__ib__",p=document,f=window;f=f[c]||(f[c]={});const m=f.maps||(f.maps={}),b=new Set,T=new URLSearchParams,E=()=>o||(o=new Promise((k,I)=>Sr(this,void 0,void 0,function*(){var F;yield l=p.createElement("script"),l.id=this.id,T.set("libraries",[...b]+"");for(a in r)T.set(a.replace(/[A-Z]/g,Y=>"_"+Y[0].toLowerCase()),r[a]);T.set("callback",c+".maps."+d),l.src=this.url+"?"+T,m[d]=k,l.onerror=()=>o=I(Error(u+" could not load.")),l.nonce=this.nonce||((F=p.querySelector("script[nonce]"))===null||F===void 0?void 0:F.nonce)||"",p.head.append(l)})));m[h]?console.warn(u+" only loads once. Ignoring:",r):m[h]=(k,...I)=>b.add(k)&&E().then(()=>m[h](k,...I))})(n);const i=this.libraries.map(r=>this.importLibrary(r));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),r=>{const o=new ErrorEvent("error",{error:r});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function Dr(s){let e,t="";return{c(){e=g("div"),e.innerHTML=t,this.h()},l(n){e=y(n,"DIV",{id:!0,style:!0,class:!0,["data-svelte-h"]:!0}),A(e)!=="svelte-wlpab8"&&(e.innerHTML=t),this.h()},h(){w(e,"id","map"),tn(e,"height","100%"),tn(e,"width","100%"),w(e,"class","svelte-1jw0l0w")},m(n,i){Ie(n,e,i)},p:Ln,i:Ln,o:Ln,d(n){n&&P(e)}}}function Pr(s,e,t){let{data:n}=e,{map:i}=e,r=[],o,l=[],a,u,{mapResult:c}=e;const h=new It({apiKey:n.GOOGLE_MAPS_API_KEY,version:"weekly"});$i(async()=>{h.load().then(async()=>{await google.maps.importLibrary("maps");let f={lat:43.73758865859436,lng:-79.50304080536894};u=new google.maps.InfoWindow,t(0,i=new google.maps.Map(document.getElementById("map"),{center:f,zoom:8,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"administrative.country",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"administrative.country",elementType:"labels.text",stylers:[{visibility:"simplified"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"simplified"},{saturation:"-100"},{lightness:"30"}]},{featureType:"administrative.neighborhood",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"simplified"},{gamma:"0.00"},{lightness:"74"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{lightness:"3"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}]})),i.setOptions({minZoom:3,maxZoom:18,zoomControl:!0}),a=new Ir({map:i,markers:r,algorithmOptions:{maxZoom:7}})})});function d(){for(let f=0;f<r.length;f++)r[f].setMap(null);r.length=0}function p(f){d(),a.clearMarkers(),r=[],l=[];for(const m of f){o=new google.maps.Marker({position:new google.maps.LatLng(m.lat,m.lng),map:i,icon:"markers/red-marker.png"}),l.includes(o.position.toString())&&(o.setIcon("markers/yellow-marker.png"),o.setPosition(new google.maps.LatLng(f.lat+1e-4,f.lng+1e-4))),m.numAttendees>50&&o.setIcon("markers/green-marker.png"),m.numAttendees>100&&o.setIcon("markers/blue-marker.png"),m.numAttendees>500&&o.setIcon("markers/purple-marker.png"),m.state===3&&o.setIcon("markers/grey-marker.png"),r.push(o),l.push(o.getPosition().toString());const b=m.primaryContact.includes("@")?'<a href="mailto:'+m.primaryContact+'" target="_blank">'+m.primaryContact+"</a>":'<a href="'+m.primaryContact+'" target="_blank">'+m.primaryContact+"</a>";google.maps.event.addListener(o,"click",function(T,E){return function(){var k=`<div style="display: block;
        text-align: left"><h2>`+E.name+"</h2><p><strong>Address: </strong><a target='_blank' href='https://www.google.com/maps/place/"+E.venueAddress.replace(" ","+")+"'>"+E.venueAddress+"</a></p><p><strong>Date: </strong>"+E.startAt+"</p><p><strong>Attendees: </strong>"+E.numAttendees+"</p><p><strong>Contact Info: </strong>"+b+"</p><p><strong>Start.gg site: </strong><a target='_blank' href='"+E.url+"'>"+E.url+"</a></p></div>";u.setContent(k),u.open(i,T),google.maps.event.addListener(i,"click",function(I){u.close()}),google.maps.event.addListener(i,"drag",function(I){u.close()}),google.maps.event.addListener(a,"click",function(I){u.close()})}}(o,m))}a.addMarkers(r)}return s.$$set=f=>{"data"in f&&t(1,n=f.data),"map"in f&&t(0,i=f.map),"mapResult"in f&&t(2,c=f.mapResult)},s.$$.update=()=>{s.$$.dirty&4&&c&&p(c)},[i,n,c]}let Rr=class extends Cn{constructor(e){super(),xn(this,e,Pr,Dr,On,{data:1,map:0,mapResult:2})}};function jr(s){return--s*s*((1.70158+1)*s+1.70158)+1}function Hi(s){const e=s-1;return e*e*e+1}function ni(s,{delay:e=0,duration:t=400,easing:n=Hi,x:i=0,y:r=0,opacity:o=0}={}){const l=getComputedStyle(s),a=+l.opacity,u=l.transform==="none"?"":l.transform,c=a*(1-o),[h,d]=Ks(i),[p,f]=Ks(r);return{delay:e,duration:t,easing:n,css:(m,b)=>`
			transform: ${u} translate(${(1-m)*h}${d}, ${(1-m)*p}${f});
			opacity: ${a-c*b}`}}function ut(s,{delay:e=0,duration:t=400,easing:n=Hi,axis:i="y"}={}){const r=getComputedStyle(s),o=+r.opacity,l=i==="y"?"height":"width",a=parseFloat(r[l]),u=i==="y"?["top","bottom"]:["left","right"],c=u.map(T=>`${T[0].toUpperCase()}${T.slice(1)}`),h=parseFloat(r[`padding${c[0]}`]),d=parseFloat(r[`padding${c[1]}`]),p=parseFloat(r[`margin${c[0]}`]),f=parseFloat(r[`margin${c[1]}`]),m=parseFloat(r[`border${c[0]}Width`]),b=parseFloat(r[`border${c[1]}Width`]);return{delay:e,duration:t,easing:n,css:T=>`overflow: hidden;opacity: ${Math.min(T*20,1)*o};${l}: ${T*a}px;padding-${u[0]}: ${T*h}px;padding-${u[1]}: ${T*d}px;margin-${u[0]}: ${T*p}px;margin-${u[1]}: ${T*f}px;border-${u[0]}-width: ${T*m}px;border-${u[1]}-width: ${T*b}px;`}}const Is=JSON,Lr=s=>s.toUpperCase(),Mr=s=>{const e={};return s.forEach((t,n)=>{e[n]=t}),e},Fr=(s,e,t)=>s.document?s:{document:s,variables:e,requestHeaders:t,signal:void 0},Ur=(s,e,t)=>s.query?s:{query:s,variables:e,requestHeaders:t,signal:void 0},$r=(s,e)=>s.documents?s:{documents:s,requestHeaders:e,signal:void 0};function Mn(s,e){if(!!!s)throw new Error(e)}function Br(s){return typeof s=="object"&&s!==null}function qr(s,e){if(!!!s)throw new Error(e??"Unexpected invariant triggered.")}const Vr=/\r\n|[\n\r]/g;function gs(s,e){let t=0,n=1;for(const i of s.body.matchAll(Vr)){if(typeof i.index=="number"||qr(!1),i.index>=e)break;t=i.index+i[0].length,n+=1}return{line:n,column:e+1-t}}function zr(s){return Ji(s.source,gs(s.source,s.start))}function Ji(s,e){const t=s.locationOffset.column-1,n="".padStart(t)+s.body,i=e.line-1,r=s.locationOffset.line-1,o=e.line+r,l=e.line===1?t:0,a=e.column+l,u=`${s.name}:${o}:${a}
`,c=n.split(/\r\n|[\n\r]/g),h=c[i];if(h.length>120){const d=Math.floor(a/80),p=a%80,f=[];for(let m=0;m<h.length;m+=80)f.push(h.slice(m,m+80));return u+si([[`${o} |`,f[0]],...f.slice(1,d+1).map(m=>["|",m]),["|","^".padStart(p)],["|",f[d+1]]])}return u+si([[`${o-1} |`,c[i-1]],[`${o} |`,h],["|","^".padStart(a)],[`${o+1} |`,c[i+1]]])}function si(s){const e=s.filter(([n,i])=>i!==void 0),t=Math.max(...e.map(([n])=>n.length));return e.map(([n,i])=>n.padStart(t)+(i?" "+i:"")).join(`
`)}function Gr(s){const e=s[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:s[1],positions:s[2],path:s[3],originalError:s[4],extensions:s[5]}:e}class Ss extends Error{constructor(e,...t){var n,i,r;const{nodes:o,source:l,positions:a,path:u,originalError:c,extensions:h}=Gr(t);super(e),this.name="GraphQLError",this.path=u??void 0,this.originalError=c??void 0,this.nodes=ii(Array.isArray(o)?o:o?[o]:void 0);const d=ii((n=this.nodes)===null||n===void 0?void 0:n.map(f=>f.loc).filter(f=>f!=null));this.source=l??(d==null||(i=d[0])===null||i===void 0?void 0:i.source),this.positions=a??(d==null?void 0:d.map(f=>f.start)),this.locations=a&&l?a.map(f=>gs(l,f)):d==null?void 0:d.map(f=>gs(f.source,f.start));const p=Br(c==null?void 0:c.extensions)?c==null?void 0:c.extensions:void 0;this.extensions=(r=h??p)!==null&&r!==void 0?r:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?Object.defineProperty(this,"stack",{value:c.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Ss):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+zr(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+Ji(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function ii(s){return s===void 0||s.length===0?void 0:s}function Le(s,e,t){return new Ss(`Syntax Error: ${t}`,{source:s,positions:[e]})}class Hr{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Ki{constructor(e,t,n,i,r,o){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=r,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const Yi={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Jr=new Set(Object.keys(Yi));function ri(s){const e=s==null?void 0:s.kind;return typeof e=="string"&&Jr.has(e)}var rn;(function(s){s.QUERY="query",s.MUTATION="mutation",s.SUBSCRIPTION="subscription"})(rn||(rn={}));var ys;(function(s){s.QUERY="QUERY",s.MUTATION="MUTATION",s.SUBSCRIPTION="SUBSCRIPTION",s.FIELD="FIELD",s.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",s.FRAGMENT_SPREAD="FRAGMENT_SPREAD",s.INLINE_FRAGMENT="INLINE_FRAGMENT",s.VARIABLE_DEFINITION="VARIABLE_DEFINITION",s.SCHEMA="SCHEMA",s.SCALAR="SCALAR",s.OBJECT="OBJECT",s.FIELD_DEFINITION="FIELD_DEFINITION",s.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",s.INTERFACE="INTERFACE",s.UNION="UNION",s.ENUM="ENUM",s.ENUM_VALUE="ENUM_VALUE",s.INPUT_OBJECT="INPUT_OBJECT",s.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(ys||(ys={}));var q;(function(s){s.NAME="Name",s.DOCUMENT="Document",s.OPERATION_DEFINITION="OperationDefinition",s.VARIABLE_DEFINITION="VariableDefinition",s.SELECTION_SET="SelectionSet",s.FIELD="Field",s.ARGUMENT="Argument",s.FRAGMENT_SPREAD="FragmentSpread",s.INLINE_FRAGMENT="InlineFragment",s.FRAGMENT_DEFINITION="FragmentDefinition",s.VARIABLE="Variable",s.INT="IntValue",s.FLOAT="FloatValue",s.STRING="StringValue",s.BOOLEAN="BooleanValue",s.NULL="NullValue",s.ENUM="EnumValue",s.LIST="ListValue",s.OBJECT="ObjectValue",s.OBJECT_FIELD="ObjectField",s.DIRECTIVE="Directive",s.NAMED_TYPE="NamedType",s.LIST_TYPE="ListType",s.NON_NULL_TYPE="NonNullType",s.SCHEMA_DEFINITION="SchemaDefinition",s.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",s.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",s.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",s.FIELD_DEFINITION="FieldDefinition",s.INPUT_VALUE_DEFINITION="InputValueDefinition",s.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",s.UNION_TYPE_DEFINITION="UnionTypeDefinition",s.ENUM_TYPE_DEFINITION="EnumTypeDefinition",s.ENUM_VALUE_DEFINITION="EnumValueDefinition",s.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",s.DIRECTIVE_DEFINITION="DirectiveDefinition",s.SCHEMA_EXTENSION="SchemaExtension",s.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",s.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",s.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",s.UNION_TYPE_EXTENSION="UnionTypeExtension",s.ENUM_TYPE_EXTENSION="EnumTypeExtension",s.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(q||(q={}));function bs(s){return s===9||s===32}function bn(s){return s>=48&&s<=57}function Wi(s){return s>=97&&s<=122||s>=65&&s<=90}function Zi(s){return Wi(s)||s===95}function Kr(s){return Wi(s)||bn(s)||s===95}function Yr(s){var e;let t=Number.MAX_SAFE_INTEGER,n=null,i=-1;for(let o=0;o<s.length;++o){var r;const l=s[o],a=Wr(l);a!==l.length&&(n=(r=n)!==null&&r!==void 0?r:o,i=o,o!==0&&a<t&&(t=a))}return s.map((o,l)=>l===0?o:o.slice(t)).slice((e=n)!==null&&e!==void 0?e:0,i+1)}function Wr(s){let e=0;for(;e<s.length&&bs(s.charCodeAt(e));)++e;return e}function Zr(s,e){const t=s.replace(/"""/g,'\\"""'),n=t.split(/\r\n|[\n\r]/g),i=n.length===1,r=n.length>1&&n.slice(1).every(p=>p.length===0||bs(p.charCodeAt(0))),o=t.endsWith('\\"""'),l=s.endsWith('"')&&!o,a=s.endsWith("\\"),u=l||a,c=!(e!=null&&e.minimize)&&(!i||s.length>70||u||r||o);let h="";const d=i&&bs(s.charCodeAt(0));return(c&&!d||r)&&(h+=`
`),h+=t,(c||u)&&(h+=`
`),'"""'+h+'"""'}var C;(function(s){s.SOF="<SOF>",s.EOF="<EOF>",s.BANG="!",s.DOLLAR="$",s.AMP="&",s.PAREN_L="(",s.PAREN_R=")",s.SPREAD="...",s.COLON=":",s.EQUALS="=",s.AT="@",s.BRACKET_L="[",s.BRACKET_R="]",s.BRACE_L="{",s.PIPE="|",s.BRACE_R="}",s.NAME="Name",s.INT="Int",s.FLOAT="Float",s.STRING="String",s.BLOCK_STRING="BlockString",s.COMMENT="Comment"})(C||(C={}));class Xr{constructor(e){const t=new Ki(C.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==C.EOF)do if(e.next)e=e.next;else{const t=eo(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===C.COMMENT);return e}}function Qr(s){return s===C.BANG||s===C.DOLLAR||s===C.AMP||s===C.PAREN_L||s===C.PAREN_R||s===C.SPREAD||s===C.COLON||s===C.EQUALS||s===C.AT||s===C.BRACKET_L||s===C.BRACKET_R||s===C.BRACE_L||s===C.PIPE||s===C.BRACE_R}function an(s){return s>=0&&s<=55295||s>=57344&&s<=1114111}function Yn(s,e){return Xi(s.charCodeAt(e))&&Qi(s.charCodeAt(e+1))}function Xi(s){return s>=55296&&s<=56319}function Qi(s){return s>=56320&&s<=57343}function Jt(s,e){const t=s.source.body.codePointAt(e);if(t===void 0)return C.EOF;if(t>=32&&t<=126){const n=String.fromCodePoint(t);return n==='"'?`'"'`:`"${n}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function Ae(s,e,t,n,i){const r=s.line,o=1+t-s.lineStart;return new Ki(e,t,n,r,o,i)}function eo(s,e){const t=s.source.body,n=t.length;let i=e;for(;i<n;){const r=t.charCodeAt(i);switch(r){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++s.line,s.lineStart=i;continue;case 13:t.charCodeAt(i+1)===10?i+=2:++i,++s.line,s.lineStart=i;continue;case 35:return to(s,i);case 33:return Ae(s,C.BANG,i,i+1);case 36:return Ae(s,C.DOLLAR,i,i+1);case 38:return Ae(s,C.AMP,i,i+1);case 40:return Ae(s,C.PAREN_L,i,i+1);case 41:return Ae(s,C.PAREN_R,i,i+1);case 46:if(t.charCodeAt(i+1)===46&&t.charCodeAt(i+2)===46)return Ae(s,C.SPREAD,i,i+3);break;case 58:return Ae(s,C.COLON,i,i+1);case 61:return Ae(s,C.EQUALS,i,i+1);case 64:return Ae(s,C.AT,i,i+1);case 91:return Ae(s,C.BRACKET_L,i,i+1);case 93:return Ae(s,C.BRACKET_R,i,i+1);case 123:return Ae(s,C.BRACE_L,i,i+1);case 124:return Ae(s,C.PIPE,i,i+1);case 125:return Ae(s,C.BRACE_R,i,i+1);case 34:return t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34?ao(s,i):so(s,i)}if(bn(r)||r===45)return no(s,i,r);if(Zi(r))return lo(s,i);throw Le(s.source,i,r===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:an(r)||Yn(t,i)?`Unexpected character: ${Jt(s,i)}.`:`Invalid character: ${Jt(s,i)}.`)}return Ae(s,C.EOF,n,n)}function to(s,e){const t=s.source.body,n=t.length;let i=e+1;for(;i<n;){const r=t.charCodeAt(i);if(r===10||r===13)break;if(an(r))++i;else if(Yn(t,i))i+=2;else break}return Ae(s,C.COMMENT,e,i,t.slice(e+1,i))}function no(s,e,t){const n=s.source.body;let i=e,r=t,o=!1;if(r===45&&(r=n.charCodeAt(++i)),r===48){if(r=n.charCodeAt(++i),bn(r))throw Le(s.source,i,`Invalid number, unexpected digit after 0: ${Jt(s,i)}.`)}else i=rs(s,i,r),r=n.charCodeAt(i);if(r===46&&(o=!0,r=n.charCodeAt(++i),i=rs(s,i,r),r=n.charCodeAt(i)),(r===69||r===101)&&(o=!0,r=n.charCodeAt(++i),(r===43||r===45)&&(r=n.charCodeAt(++i)),i=rs(s,i,r),r=n.charCodeAt(i)),r===46||Zi(r))throw Le(s.source,i,`Invalid number, expected digit but got: ${Jt(s,i)}.`);return Ae(s,o?C.FLOAT:C.INT,e,i,n.slice(e,i))}function rs(s,e,t){if(!bn(t))throw Le(s.source,e,`Invalid number, expected digit but got: ${Jt(s,e)}.`);const n=s.source.body;let i=e+1;for(;bn(n.charCodeAt(i));)++i;return i}function so(s,e){const t=s.source.body,n=t.length;let i=e+1,r=i,o="";for(;i<n;){const l=t.charCodeAt(i);if(l===34)return o+=t.slice(r,i),Ae(s,C.STRING,e,i+1,o);if(l===92){o+=t.slice(r,i);const a=t.charCodeAt(i+1)===117?t.charCodeAt(i+2)===123?io(s,i):ro(s,i):oo(s,i);o+=a.value,i+=a.size,r=i;continue}if(l===10||l===13)break;if(an(l))++i;else if(Yn(t,i))i+=2;else throw Le(s.source,i,`Invalid character within String: ${Jt(s,i)}.`)}throw Le(s.source,i,"Unterminated string.")}function io(s,e){const t=s.source.body;let n=0,i=3;for(;i<12;){const r=t.charCodeAt(e+i++);if(r===125){if(i<5||!an(n))break;return{value:String.fromCodePoint(n),size:i}}if(n=n<<4|pn(r),n<0)break}throw Le(s.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+i)}".`)}function ro(s,e){const t=s.source.body,n=oi(t,e+2);if(an(n))return{value:String.fromCodePoint(n),size:6};if(Xi(n)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const i=oi(t,e+8);if(Qi(i))return{value:String.fromCodePoint(n,i),size:12}}throw Le(s.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function oi(s,e){return pn(s.charCodeAt(e))<<12|pn(s.charCodeAt(e+1))<<8|pn(s.charCodeAt(e+2))<<4|pn(s.charCodeAt(e+3))}function pn(s){return s>=48&&s<=57?s-48:s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:-1}function oo(s,e){const t=s.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Le(s.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function ao(s,e){const t=s.source.body,n=t.length;let i=s.lineStart,r=e+3,o=r,l="";const a=[];for(;r<n;){const u=t.charCodeAt(r);if(u===34&&t.charCodeAt(r+1)===34&&t.charCodeAt(r+2)===34){l+=t.slice(o,r),a.push(l);const c=Ae(s,C.BLOCK_STRING,e,r+3,Yr(a).join(`
`));return s.line+=a.length-1,s.lineStart=i,c}if(u===92&&t.charCodeAt(r+1)===34&&t.charCodeAt(r+2)===34&&t.charCodeAt(r+3)===34){l+=t.slice(o,r),o=r+1,r+=4;continue}if(u===10||u===13){l+=t.slice(o,r),a.push(l),u===13&&t.charCodeAt(r+1)===10?r+=2:++r,l="",o=r,i=r;continue}if(an(u))++r;else if(Yn(t,r))r+=2;else throw Le(s.source,r,`Invalid character within String: ${Jt(s,r)}.`)}throw Le(s.source,r,"Unterminated string.")}function lo(s,e){const t=s.source.body,n=t.length;let i=e+1;for(;i<n;){const r=t.charCodeAt(i);if(Kr(r))++i;else break}return Ae(s,C.NAME,e,i,t.slice(e,i))}const co=10,er=2;function Ns(s){return Wn(s,[])}function Wn(s,e){switch(typeof s){case"string":return JSON.stringify(s);case"function":return s.name?`[function ${s.name}]`:"[function]";case"object":return uo(s,e);default:return String(s)}}function uo(s,e){if(s===null)return"null";if(e.includes(s))return"[Circular]";const t=[...e,s];if(ho(s)){const n=s.toJSON();if(n!==s)return typeof n=="string"?n:Wn(n,t)}else if(Array.isArray(s))return po(s,t);return fo(s,t)}function ho(s){return typeof s.toJSON=="function"}function fo(s,e){const t=Object.entries(s);return t.length===0?"{}":e.length>er?"["+mo(s)+"]":"{ "+t.map(([i,r])=>i+": "+Wn(r,e)).join(", ")+" }"}function po(s,e){if(s.length===0)return"[]";if(e.length>er)return"[Array]";const t=Math.min(co,s.length),n=s.length-t,i=[];for(let r=0;r<t;++r)i.push(Wn(s[r],e));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function mo(s){const e=Object.prototype.toString.call(s).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof s.constructor=="function"){const t=s.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const vo=globalThis.process?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if(typeof e=="object"&&e!==null){var n;const i=t.prototype[Symbol.toStringTag],r=Symbol.toStringTag in e?e[Symbol.toStringTag]:(n=e.constructor)===null||n===void 0?void 0:n.name;if(i===r){const o=Ns(e);throw new Error(`Cannot use ${i} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class tr{constructor(e,t="GraphQL request",n={line:1,column:1}){typeof e=="string"||Mn(!1,`Body must be a string. Received: ${Ns(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Mn(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Mn(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function _o(s){return vo(s,tr)}function go(s,e){return new yo(s,e).parseDocument()}class yo{constructor(e,t={}){const n=_o(e)?e:new tr(e);this._lexer=new Xr(n),this._options=t,this._tokenCounter=0}parseName(){const e=this.expectToken(C.NAME);return this.node(e,{kind:q.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:q.DOCUMENT,definitions:this.many(C.SOF,this.parseDefinition,C.EOF)})}parseDefinition(){if(this.peek(C.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===C.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw Le(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(C.BRACE_L))return this.node(e,{kind:q.OPERATION_DEFINITION,operation:rn.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(C.NAME)&&(n=this.parseName()),this.node(e,{kind:q.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(C.NAME);switch(e.value){case"query":return rn.QUERY;case"mutation":return rn.MUTATION;case"subscription":return rn.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(C.PAREN_L,this.parseVariableDefinition,C.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:q.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(C.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(C.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(C.DOLLAR),this.node(e,{kind:q.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:q.SELECTION_SET,selections:this.many(C.BRACE_L,this.parseSelection,C.BRACE_R)})}parseSelection(){return this.peek(C.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,i;return this.expectOptionalToken(C.COLON)?(n=t,i=this.parseName()):i=t,this.node(e,{kind:q.FIELD,alias:n,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(C.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(C.PAREN_L,t,C.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(C.COLON),this.node(t,{kind:q.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(C.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(C.NAME)?this.node(e,{kind:q.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:q.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:q.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:q.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case C.BRACKET_L:return this.parseList(e);case C.BRACE_L:return this.parseObject(e);case C.INT:return this.advanceLexer(),this.node(t,{kind:q.INT,value:t.value});case C.FLOAT:return this.advanceLexer(),this.node(t,{kind:q.FLOAT,value:t.value});case C.STRING:case C.BLOCK_STRING:return this.parseStringLiteral();case C.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:q.BOOLEAN,value:!0});case"false":return this.node(t,{kind:q.BOOLEAN,value:!1});case"null":return this.node(t,{kind:q.NULL});default:return this.node(t,{kind:q.ENUM,value:t.value})}case C.DOLLAR:if(e)if(this.expectToken(C.DOLLAR),this._lexer.token.kind===C.NAME){const n=this._lexer.token.value;throw Le(this._lexer.source,t.start,`Unexpected variable "$${n}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:q.STRING,value:e.value,block:e.kind===C.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:q.LIST,values:this.any(C.BRACKET_L,t,C.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:q.OBJECT,fields:this.any(C.BRACE_L,t,C.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(C.COLON),this.node(t,{kind:q.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(C.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(C.AT),this.node(t,{kind:q.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(C.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(C.BRACKET_R),t=this.node(e,{kind:q.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(C.BANG)?this.node(e,{kind:q.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:q.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(C.STRING)||this.peek(C.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),i=this.many(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);return this.node(e,{kind:q.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(C.COLON);const n=this.parseNamedType();return this.node(e,{kind:q.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:q.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:q.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:r,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(C.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(C.BRACE_L,this.parseFieldDefinition,C.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(C.COLON);const r=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:q.FIELD_DEFINITION,description:t,name:n,arguments:i,type:r,directives:o})}parseArgumentDefs(){return this.optionalMany(C.PAREN_L,this.parseInputValueDef,C.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(C.COLON);const i=this.parseTypeReference();let r;this.expectOptionalToken(C.EQUALS)&&(r=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:q.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:r,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:q.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:r,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),i=this.parseConstDirectives(),r=this.parseUnionMemberTypes();return this.node(e,{kind:q.UNION_TYPE_DEFINITION,description:t,name:n,directives:i,types:r})}parseUnionMemberTypes(){return this.expectOptionalToken(C.EQUALS)?this.delimitedMany(C.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),i=this.parseConstDirectives(),r=this.parseEnumValuesDefinition();return this.node(e,{kind:q.ENUM_TYPE_DEFINITION,description:t,name:n,directives:i,values:r})}parseEnumValuesDefinition(){return this.optionalMany(C.BRACE_L,this.parseEnumValueDefinition,C.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:q.ENUM_VALUE_DEFINITION,description:t,name:n,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Le(this._lexer.source,this._lexer.token.start,`${Sn(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),i=this.parseConstDirectives(),r=this.parseInputFieldsDefinition();return this.node(e,{kind:q.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:i,fields:r})}parseInputFieldsDefinition(){return this.optionalMany(C.BRACE_L,this.parseInputValueDef,C.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===C.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);if(t.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:q.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(n.length===0)throw this.unexpected();return this.node(e,{kind:q.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),r=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:q.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:r})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),r=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:q.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:r})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:q.UNION_TYPE_EXTENSION,name:t,directives:n,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:q.ENUM_TYPE_EXTENSION,name:t,directives:n,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:q.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(C.AT);const n=this.parseName(),i=this.parseArgumentDefs(),r=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:q.DIRECTIVE_DEFINITION,description:t,name:n,arguments:i,repeatable:r,locations:o})}parseDirectiveLocations(){return this.delimitedMany(C.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(ys,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new Hr(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw Le(this._lexer.source,t.start,`Expected ${nr(e)}, found ${Sn(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===C.NAME&&t.value===e)this.advanceLexer();else throw Le(this._lexer.source,t.start,`Expected "${e}", found ${Sn(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===C.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e??this._lexer.token;return Le(this._lexer.source,t.start,`Unexpected ${Sn(t)}.`)}any(e,t,n){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(n);)i.push(t.call(this));return i}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(n));return i}return[]}many(e,t,n){this.expectToken(e);const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(n));return i}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(e!==void 0&&t.kind!==C.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw Le(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function Sn(s){const e=s.value;return nr(s.kind)+(e!=null?` "${e}"`:"")}function nr(s){return Qr(s)?`"${s}"`:s}function bo(s){return`"${s.replace(wo,To)}"`}const wo=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function To(s){return Eo[s.charCodeAt(0)]}const Eo=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],Oo=Object.freeze({});function Co(s,e,t=Yi){const n=new Map;for(const T of Object.values(q))n.set(T,xo(e,T));let i,r=Array.isArray(s),o=[s],l=-1,a=[],u=s,c,h;const d=[],p=[];do{l++;const T=l===o.length,E=T&&a.length!==0;if(T){if(c=p.length===0?void 0:d[d.length-1],u=h,h=p.pop(),E)if(r){u=u.slice();let I=0;for(const[F,Y]of a){const j=F-I;Y===null?(u.splice(j,1),I++):u[j]=Y}}else{u=Object.defineProperties({},Object.getOwnPropertyDescriptors(u));for(const[I,F]of a)u[I]=F}l=i.index,o=i.keys,a=i.edits,r=i.inArray,i=i.prev}else if(h){if(c=r?l:o[l],u=h[c],u==null)continue;d.push(c)}let k;if(!Array.isArray(u)){var f,m;ri(u)||Mn(!1,`Invalid AST Node: ${Ns(u)}.`);const I=T?(f=n.get(u.kind))===null||f===void 0?void 0:f.leave:(m=n.get(u.kind))===null||m===void 0?void 0:m.enter;if(k=I==null?void 0:I.call(e,u,c,h,d,p),k===Oo)break;if(k===!1){if(!T){d.pop();continue}}else if(k!==void 0&&(a.push([c,k]),!T))if(ri(k))u=k;else{d.pop();continue}}if(k===void 0&&E&&a.push([c,u]),T)d.pop();else{var b;i={inArray:r,index:l,keys:o,edits:a,prev:i},r=Array.isArray(u),o=r?u:(b=t[u.kind])!==null&&b!==void 0?b:[],l=-1,a=[],h&&p.push(h),h=u}}while(i!==void 0);return a.length!==0?a[a.length-1][1]:s}function xo(s,e){const t=s[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:s.enter,leave:s.leave}}function ko(s){return Co(s,Io)}const Ao=80,Io={Name:{leave:s=>s.value},Variable:{leave:s=>"$"+s.name},Document:{leave:s=>L(s.definitions,`

`)},OperationDefinition:{leave(s){const e=ne("(",L(s.variableDefinitions,", "),")"),t=L([s.operation,L([s.name,e]),L(s.directives," ")]," ");return(t==="query"?"":t+" ")+s.selectionSet}},VariableDefinition:{leave:({variable:s,type:e,defaultValue:t,directives:n})=>s+": "+e+ne(" = ",t)+ne(" ",L(n," "))},SelectionSet:{leave:({selections:s})=>ot(s)},Field:{leave({alias:s,name:e,arguments:t,directives:n,selectionSet:i}){const r=ne("",s,": ")+e;let o=r+ne("(",L(t,", "),")");return o.length>Ao&&(o=r+ne(`(
`,Fn(L(t,`
`)),`
)`)),L([o,L(n," "),i]," ")}},Argument:{leave:({name:s,value:e})=>s+": "+e},FragmentSpread:{leave:({name:s,directives:e})=>"..."+s+ne(" ",L(e," "))},InlineFragment:{leave:({typeCondition:s,directives:e,selectionSet:t})=>L(["...",ne("on ",s),L(e," "),t]," ")},FragmentDefinition:{leave:({name:s,typeCondition:e,variableDefinitions:t,directives:n,selectionSet:i})=>`fragment ${s}${ne("(",L(t,", "),")")} on ${e} ${ne("",L(n," ")," ")}`+i},IntValue:{leave:({value:s})=>s},FloatValue:{leave:({value:s})=>s},StringValue:{leave:({value:s,block:e})=>e?Zr(s):bo(s)},BooleanValue:{leave:({value:s})=>s?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:s})=>s},ListValue:{leave:({values:s})=>"["+L(s,", ")+"]"},ObjectValue:{leave:({fields:s})=>"{"+L(s,", ")+"}"},ObjectField:{leave:({name:s,value:e})=>s+": "+e},Directive:{leave:({name:s,arguments:e})=>"@"+s+ne("(",L(e,", "),")")},NamedType:{leave:({name:s})=>s},ListType:{leave:({type:s})=>"["+s+"]"},NonNullType:{leave:({type:s})=>s+"!"},SchemaDefinition:{leave:({description:s,directives:e,operationTypes:t})=>ne("",s,`
`)+L(["schema",L(e," "),ot(t)]," ")},OperationTypeDefinition:{leave:({operation:s,type:e})=>s+": "+e},ScalarTypeDefinition:{leave:({description:s,name:e,directives:t})=>ne("",s,`
`)+L(["scalar",e,L(t," ")]," ")},ObjectTypeDefinition:{leave:({description:s,name:e,interfaces:t,directives:n,fields:i})=>ne("",s,`
`)+L(["type",e,ne("implements ",L(t," & ")),L(n," "),ot(i)]," ")},FieldDefinition:{leave:({description:s,name:e,arguments:t,type:n,directives:i})=>ne("",s,`
`)+e+(ai(t)?ne(`(
`,Fn(L(t,`
`)),`
)`):ne("(",L(t,", "),")"))+": "+n+ne(" ",L(i," "))},InputValueDefinition:{leave:({description:s,name:e,type:t,defaultValue:n,directives:i})=>ne("",s,`
`)+L([e+": "+t,ne("= ",n),L(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:s,name:e,interfaces:t,directives:n,fields:i})=>ne("",s,`
`)+L(["interface",e,ne("implements ",L(t," & ")),L(n," "),ot(i)]," ")},UnionTypeDefinition:{leave:({description:s,name:e,directives:t,types:n})=>ne("",s,`
`)+L(["union",e,L(t," "),ne("= ",L(n," | "))]," ")},EnumTypeDefinition:{leave:({description:s,name:e,directives:t,values:n})=>ne("",s,`
`)+L(["enum",e,L(t," "),ot(n)]," ")},EnumValueDefinition:{leave:({description:s,name:e,directives:t})=>ne("",s,`
`)+L([e,L(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:s,name:e,directives:t,fields:n})=>ne("",s,`
`)+L(["input",e,L(t," "),ot(n)]," ")},DirectiveDefinition:{leave:({description:s,name:e,arguments:t,repeatable:n,locations:i})=>ne("",s,`
`)+"directive @"+e+(ai(t)?ne(`(
`,Fn(L(t,`
`)),`
)`):ne("(",L(t,", "),")"))+(n?" repeatable":"")+" on "+L(i," | ")},SchemaExtension:{leave:({directives:s,operationTypes:e})=>L(["extend schema",L(s," "),ot(e)]," ")},ScalarTypeExtension:{leave:({name:s,directives:e})=>L(["extend scalar",s,L(e," ")]," ")},ObjectTypeExtension:{leave:({name:s,interfaces:e,directives:t,fields:n})=>L(["extend type",s,ne("implements ",L(e," & ")),L(t," "),ot(n)]," ")},InterfaceTypeExtension:{leave:({name:s,interfaces:e,directives:t,fields:n})=>L(["extend interface",s,ne("implements ",L(e," & ")),L(t," "),ot(n)]," ")},UnionTypeExtension:{leave:({name:s,directives:e,types:t})=>L(["extend union",s,L(e," "),ne("= ",L(t," | "))]," ")},EnumTypeExtension:{leave:({name:s,directives:e,values:t})=>L(["extend enum",s,L(e," "),ot(t)]," ")},InputObjectTypeExtension:{leave:({name:s,directives:e,fields:t})=>L(["extend input",s,L(e," "),ot(t)]," ")}};function L(s,e=""){var t;return(t=s==null?void 0:s.filter(n=>n).join(e))!==null&&t!==void 0?t:""}function ot(s){return ne(`{
`,Fn(L(s,`
`)),`
}`)}function ne(s,e,t=""){return e!=null&&e!==""?s+e+t:""}function Fn(s){return ne("  ",s.replace(/\n/g,`
  `))}function ai(s){var e;return(e=s==null?void 0:s.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}const li=s=>{var n,i;let e;const t=s.definitions.filter(r=>r.kind==="OperationDefinition");return t.length===1&&(e=(i=(n=t[0])==null?void 0:n.name)==null?void 0:i.value),e},os=s=>{if(typeof s=="string"){let t;try{const n=go(s);t=li(n)}catch{}return{query:s,operationName:t}}const e=li(s);return{query:ko(s),operationName:e}};class _n extends Error{constructor(e,t){const n=`${_n.extractMessage(e)}: ${JSON.stringify({response:e,request:t})}`;super(n),Object.setPrototypeOf(this,_n.prototype),this.response=e,this.request=t,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_n)}static extractMessage(e){var t,n;return((n=(t=e.errors)==null?void 0:t[0])==null?void 0:n.message)??`GraphQL Error (Code: ${e.status})`}}var ws={exports:{}};(function(s,e){var t=typeof self<"u"?self:mr,n=function(){function r(){this.fetch=!1,this.DOMException=t.DOMException}return r.prototype=t,new r}();(function(r){(function(o){var l={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function a(_){return _&&DataView.prototype.isPrototypeOf(_)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(_){return _&&u.indexOf(Object.prototype.toString.call(_))>-1};function h(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(_))throw new TypeError("Invalid character in header field name");return _.toLowerCase()}function d(_){return typeof _!="string"&&(_=String(_)),_}function p(_){var O={next:function(){var R=_.shift();return{done:R===void 0,value:R}}};return l.iterable&&(O[Symbol.iterator]=function(){return O}),O}function f(_){this.map={},_ instanceof f?_.forEach(function(O,R){this.append(R,O)},this):Array.isArray(_)?_.forEach(function(O){this.append(O[0],O[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(O){this.append(O,_[O])},this)}f.prototype.append=function(_,O){_=h(_),O=d(O);var R=this.map[_];this.map[_]=R?R+", "+O:O},f.prototype.delete=function(_){delete this.map[h(_)]},f.prototype.get=function(_){return _=h(_),this.has(_)?this.map[_]:null},f.prototype.has=function(_){return this.map.hasOwnProperty(h(_))},f.prototype.set=function(_,O){this.map[h(_)]=d(O)},f.prototype.forEach=function(_,O){for(var R in this.map)this.map.hasOwnProperty(R)&&_.call(O,this.map[R],R,this)},f.prototype.keys=function(){var _=[];return this.forEach(function(O,R){_.push(R)}),p(_)},f.prototype.values=function(){var _=[];return this.forEach(function(O){_.push(O)}),p(_)},f.prototype.entries=function(){var _=[];return this.forEach(function(O,R){_.push([R,O])}),p(_)},l.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);function m(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function b(_){return new Promise(function(O,R){_.onload=function(){O(_.result)},_.onerror=function(){R(_.error)}})}function T(_){var O=new FileReader,R=b(O);return O.readAsArrayBuffer(_),R}function E(_){var O=new FileReader,R=b(O);return O.readAsText(_),R}function k(_){for(var O=new Uint8Array(_),R=new Array(O.length),Z=0;Z<O.length;Z++)R[Z]=String.fromCharCode(O[Z]);return R.join("")}function I(_){if(_.slice)return _.slice(0);var O=new Uint8Array(_.byteLength);return O.set(new Uint8Array(_)),O.buffer}function F(){return this.bodyUsed=!1,this._initBody=function(_){this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:l.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:l.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():l.arrayBuffer&&l.blob&&a(_)?(this._bodyArrayBuffer=I(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||c(_))?this._bodyArrayBuffer=I(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var _=m(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(T)}),this.text=function(){var _=m(this);if(_)return _;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var Y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function j(_){var O=_.toUpperCase();return Y.indexOf(O)>-1?O:_}function S(_,O){O=O||{};var R=O.body;if(_ instanceof S){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,O.headers||(this.headers=new f(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!R&&_._bodyInit!=null&&(R=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new f(O.headers)),this.method=j(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(R)}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function W(_){var O=new FormData;return _.trim().split("&").forEach(function(R){if(R){var Z=R.split("="),V=Z.shift().replace(/\+/g," "),x=Z.join("=").replace(/\+/g," ");O.append(decodeURIComponent(V),decodeURIComponent(x))}}),O}function $(_){var O=new f,R=_.replace(/\r?\n[\t ]+/g," ");return R.split(/\r?\n/).forEach(function(Z){var V=Z.split(":"),x=V.shift().trim();if(x){var B=V.join(":").trim();O.append(x,B)}}),O}F.call(S.prototype);function se(_,O){O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in O?O.statusText:"OK",this.headers=new f(O.headers),this.url=O.url||"",this._initBody(_)}F.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},se.error=function(){var _=new se(null,{status:0,statusText:""});return _.type="error",_};var ue=[301,302,303,307,308];se.redirect=function(_,O){if(ue.indexOf(O)===-1)throw new RangeError("Invalid status code");return new se(null,{status:O,headers:{location:_}})},o.DOMException=r.DOMException;try{new o.DOMException}catch{o.DOMException=function(O,R){this.message=O,this.name=R;var Z=Error(O);this.stack=Z.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function K(_,O){return new Promise(function(R,Z){var V=new S(_,O);if(V.signal&&V.signal.aborted)return Z(new o.DOMException("Aborted","AbortError"));var x=new XMLHttpRequest;function B(){x.abort()}x.onload=function(){var X={status:x.status,statusText:x.statusText,headers:$(x.getAllResponseHeaders()||"")};X.url="responseURL"in x?x.responseURL:X.headers.get("X-Request-URL");var D="response"in x?x.response:x.responseText;R(new se(D,X))},x.onerror=function(){Z(new TypeError("Network request failed"))},x.ontimeout=function(){Z(new TypeError("Network request failed"))},x.onabort=function(){Z(new o.DOMException("Aborted","AbortError"))},x.open(V.method,V.url,!0),V.credentials==="include"?x.withCredentials=!0:V.credentials==="omit"&&(x.withCredentials=!1),"responseType"in x&&l.blob&&(x.responseType="blob"),V.headers.forEach(function(X,D){x.setRequestHeader(D,X)}),V.signal&&(V.signal.addEventListener("abort",B),x.onreadystatechange=function(){x.readyState===4&&V.signal.removeEventListener("abort",B)}),x.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return K.polyfill=!0,r.fetch||(r.fetch=K,r.Headers=f,r.Request=S,r.Response=se),o.Headers=f,o.Request=S,o.Response=se,o.fetch=K,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,s.exports=e})(ws,ws.exports);var wn=ws.exports;const on=qi(wn),kn=pr({__proto__:null,default:on},[wn]),Zt=s=>{let e={};return s&&(typeof Headers<"u"&&s instanceof Headers||kn&&wn.Headers&&s instanceof wn.Headers?e=Mr(s):Array.isArray(s)?s.forEach(([t,n])=>{t&&n!==void 0&&(e[t]=n)}):e=s),e},ci=s=>s.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),So=s=>{if(!Array.isArray(s.query)){const n=s,i=[`query=${encodeURIComponent(ci(n.query))}`];return s.variables&&i.push(`variables=${encodeURIComponent(n.jsonSerializer.stringify(n.variables))}`),n.operationName&&i.push(`operationName=${encodeURIComponent(n.operationName)}`),i.join("&")}if(typeof s.variables<"u"&&!Array.isArray(s.variables))throw new Error("Cannot create query with given variable type, array expected");const e=s,t=s.query.reduce((n,i,r)=>(n.push({query:ci(i),variables:e.variables?e.jsonSerializer.stringify(e.variables[r]):void 0}),n),[]);return`query=${encodeURIComponent(e.jsonSerializer.stringify(t))}`},No=s=>async e=>{const{url:t,query:n,variables:i,operationName:r,fetch:o,fetchOptions:l,middleware:a}=e,u={...e.headers};let c="",h;s==="POST"?(h=Po(n,i,r,l.jsonSerializer),typeof h=="string"&&(u["Content-Type"]="application/json")):c=So({query:n,variables:i,operationName:r,jsonSerializer:l.jsonSerializer??Is});const d={method:s,headers:u,body:h,...l};let p=t,f=d;if(a){const m=await Promise.resolve(a({...d,url:t,operationName:r,variables:i})),{url:b,...T}=m;p=b,f=T}return c&&(p=`${p}?${c}`),await o(p,f)};class Do{constructor(e,t={}){this.url=e,this.requestConfig=t,this.rawRequest=async(...n)=>{const[i,r,o]=n,l=Ur(i,r,o),{headers:a,fetch:u=on,method:c="POST",requestMiddleware:h,responseMiddleware:d,...p}=this.requestConfig,{url:f}=this;l.signal!==void 0&&(p.signal=l.signal);const{operationName:m}=os(l.query);return as({url:f,query:l.query,variables:l.variables,headers:{...Zt(ls(a)),...Zt(l.requestHeaders)},operationName:m,fetch:u,method:c,fetchOptions:p,middleware:h}).then(b=>(d&&d(b),b)).catch(b=>{throw d&&d(b),b})}}async request(e,...t){const[n,i]=t,r=Fr(e,n,i),{headers:o,fetch:l=on,method:a="POST",requestMiddleware:u,responseMiddleware:c,...h}=this.requestConfig,{url:d}=this;r.signal!==void 0&&(h.signal=r.signal);const{query:p,operationName:f}=os(r.document);return as({url:d,query:p,variables:r.variables,headers:{...Zt(ls(o)),...Zt(r.requestHeaders)},operationName:f,fetch:l,method:a,fetchOptions:h,middleware:u}).then(m=>(c&&c(m),m.data)).catch(m=>{throw c&&c(m),m})}batchRequests(e,t){const n=$r(e,t),{headers:i,...r}=this.requestConfig;n.signal!==void 0&&(r.signal=n.signal);const o=n.documents.map(({document:a})=>os(a).query),l=n.documents.map(({variables:a})=>a);return as({url:this.url,query:o,variables:l,headers:{...Zt(ls(i)),...Zt(n.requestHeaders)},operationName:void 0,fetch:this.requestConfig.fetch??on,method:this.requestConfig.method||"POST",fetchOptions:r,middleware:this.requestConfig.requestMiddleware}).then(a=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(a),a.data)).catch(a=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(a),a})}setHeaders(e){return this.requestConfig.headers=e,this}setHeader(e,t){const{headers:n}=this.requestConfig;return n?n[e]=t:this.requestConfig.headers={[e]:t},this}setEndpoint(e){return this.url=e,this}}const as=async s=>{const{query:e,variables:t,fetchOptions:n}=s,i=No(Lr(s.method??"post")),r=Array.isArray(s.query),o=await i(s),l=await Ro(o,n.jsonSerializer??Is),a=Array.isArray(l)?!l.some(({data:c})=>!c):!!l.data,u=Array.isArray(l)||!l.errors||Array.isArray(l.errors)&&!l.errors.length||n.errorPolicy==="all"||n.errorPolicy==="ignore";if(o.ok&&u&&a){const{errors:c,...h}=(Array.isArray(l),l),d=n.errorPolicy==="ignore"?h:l;return{...r?{data:d}:d,headers:o.headers,status:o.status}}else{const c=typeof l=="string"?{error:l}:l;throw new _n({...c,status:o.status,headers:o.headers},{query:e,variables:t})}},Po=(s,e,t,n)=>{const i=n??Is;if(!Array.isArray(s))return i.stringify({query:s,variables:e,operationName:t});if(typeof e<"u"&&!Array.isArray(e))throw new Error("Cannot create request body with given variable type, array expected");const r=s.reduce((o,l,a)=>(o.push({query:l,variables:e?e[a]:void 0}),o),[]);return i.stringify(r)},Ro=async(s,e)=>{let t;return s.headers.forEach((n,i)=>{i.toLowerCase()==="content-type"&&(t=n)}),t&&(t.toLowerCase().startsWith("application/json")||t.toLowerCase().startsWith("application/graphql+json")||t.toLowerCase().startsWith("application/graphql-response+json"))?e.parse(await s.text()):s.text()},ls=s=>typeof s=="function"?s():s;var jo=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const Lo=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>jo(void 0,void 0,void 0,function*(){return yield(yield Kn(()=>Promise.resolve().then(()=>kn),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class Ds extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Mo extends Ds{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Fo extends Ds{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Uo extends Ds{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $o=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};class Bo{constructor(e,{headers:t={},customFetch:n}={}){this.url=e,this.headers=t,this.fetch=Lo(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return $o(this,void 0,void 0,function*(){try{const{headers:i,method:r,body:o}=t;let l={},a;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",a=o):typeof o=="string"?(l["Content-Type"]="text/plain",a=o):typeof FormData<"u"&&o instanceof FormData?a=o:(l["Content-Type"]="application/json",a=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:a}).catch(p=>{throw new Mo(p)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new Fo(u);if(!u.ok)throw new Uo(u);let h=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),d;return h==="application/json"?d=yield u.json():h==="application/octet-stream"?d=yield u.blob():h==="multipart/form-data"?d=yield u.formData():d=yield u.text(),{data:d,error:null}}catch(i){return{data:null,error:i}}})}}class qo{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=on:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{var o,l,a;let u=null,c=null,h=null,d=r.status,p=r.statusText;if(r.ok){if(this.method!=="HEAD"){const T=await r.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=T:c=JSON.parse(T))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=r.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");m&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,d=406,p="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const m=await r.text();try{u=JSON.parse(m),Array.isArray(u)&&r.status===404&&(c=[],u=null,d=200,p="OK")}catch{r.status===404&&m===""?(d=204,p="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((a=u==null?void 0:u.details)===null||a===void 0)&&a.includes("Results contain 0 rows"))&&(u=null,d=200,p="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:h,status:d,statusText:p}});return this.shouldThrowOnError||(i=i.catch(r=>{var o,l,a;return{error:{message:`${(o=r==null?void 0:r.name)!==null&&o!==void 0?o:"FetchError"}: ${r==null?void 0:r.message}`,details:`${(l=r==null?void 0:r.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=r==null?void 0:r.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}}class Vo extends qo{select(e){let t=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i}={}){const r=i?`${i}.order`:"order",o=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const i=typeof n>"u"?"offset":`${n}.offset`,r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(r,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:o="text"}={}){const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),a=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${a}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class en extends Vo{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class zo{constructor(e,{headers:t={},schema:n,fetch:i}){this.url=e,this.headers=t,this.schema=n,this.fetch=i}select(e,{head:t=!1,count:n}={}){const i=t?"HEAD":"GET";let r=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!r?"":(l==='"'&&(r=!r),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new en({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const i="POST",r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new en({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),r||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){const u=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new en({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new en({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new en({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Go="1.7.1",Ho={"X-Client-Info":`postgrest-js/${Go}`};class Jo{constructor(e,{headers:t={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ho),t),this.schema=n,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new zo(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:i}={}){let r;const o=new URL(`${this.url}/rpc/${e}`);let l;n?(r="HEAD",Object.entries(t).forEach(([u,c])=>{o.searchParams.append(u,`${c}`)})):(r="POST",l=t);const a=Object.assign({},this.headers);return i&&(a.Prefer=`count=${i}`),new en({method:r,url:o,headers:a,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}}var cs,ui;function Ko(){if(ui)return cs;ui=1;var s=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return cs=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return s()}try{return __global__||s()}finally{delete Object.prototype.__global__}}(),cs}const Yo="websocket",Wo="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Zo=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Xo="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Qo=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],ea="1.0.34",ta={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},na="https://github.com/theturtle32/WebSocket-Node",sa={node:">=4.0.0"},ia={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},ra={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},oa={verbose:!1},aa={test:"tape test/unit/*.js",gulp:"gulp"},la="index",ca={lib:"./lib"},ua="lib/browser.js",ha="Apache-2.0",da={name:Yo,description:Wo,keywords:Zo,author:Xo,contributors:Qo,version:ea,repository:ta,homepage:na,engines:sa,dependencies:ia,devDependencies:ra,config:oa,scripts:aa,main:la,directories:ca,browser:ua,license:ha};var fa=da.version,qt;if(typeof globalThis=="object")qt=globalThis;else try{qt=Ko()}catch{}finally{if(!qt&&typeof window<"u"&&(qt=window),!qt)throw new Error("Could not determine global this")}var Tn=qt.WebSocket||qt.MozWebSocket,pa=fa;function sr(s,e){var t;return e?t=new Tn(s,e):t=new Tn(s),t}Tn&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(s){Object.defineProperty(sr,s,{get:function(){return Tn[s]}})});var ma={w3cwebsocket:Tn?sr:null,version:pa};const va="2.7.3",_a={"X-Client-Info":`realtime-js/${va}`},ga="1.0.0",ir=1e4,ya=1e3;var gn;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(gn||(gn={}));var Qe;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Qe||(Qe={}));var at;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(at||(at={}));var Ts;(function(s){s.websocket="websocket"})(Ts||(Ts={}));var Vt;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Vt||(Vt={}));class rr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ba{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),r=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+i));o=o+i;const a=n.decode(e.slice(o,o+r));o=o+r;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:u}}}class us{constructor(e,t,n={},i=ir){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hi;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(hi||(hi={}));class yn{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:r,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yn.syncState(this.state,i,r,o),this.pendingDiffs.forEach(a=>{this.state=yn.syncDiff(this.state,a,r,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=yn.syncDiff(this.state,i,r,o),l())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const r=this.cloneDeep(e),o=this.transformState(t),l={},a={};return this.map(r,(u,c)=>{o[u]||(a[u]=c)}),this.map(o,(u,c)=>{const h=r[u];if(h){const d=c.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),f=c.filter(b=>p.indexOf(b.presence_ref)<0),m=h.filter(b=>d.indexOf(b.presence_ref)<0);f.length>0&&(l[u]=f),m.length>0&&(a[u]=m)}else l[u]=c}),this.syncDiff(r,{joins:l,leaves:a},n,i)}static syncDiff(e,t,n,i){const{joins:r,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,(l,a)=>{var u;const c=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(a),c.length>0){const h=e[l].map(p=>p.presence_ref),d=c.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...d)}n(l,c,a)}),this.map(o,(l,a)=>{let u=e[l];if(!u)return;const c=a.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[l]=u,i(l,u,a),u.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var de;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(de||(de={}));const di=(s,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((r,o)=>(r[o]=wa(o,s,e,i),r),{})},wa=(s,e,t,n)=>{const i=e.find(l=>l.name===s),r=i==null?void 0:i.type,o=t[s];return r&&!n.includes(r)?or(r,o):Es(o)},or=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Ca(e,t)}switch(s){case de.bool:return Ta(e);case de.float4:case de.float8:case de.int2:case de.int4:case de.int8:case de.numeric:case de.oid:return Ea(e);case de.json:case de.jsonb:return Oa(e);case de.timestamp:return xa(e);case de.abstime:case de.date:case de.daterange:case de.int4range:case de.int8range:case de.money:case de.reltime:case de.text:case de.time:case de.timestamptz:case de.timetz:case de.tsrange:case de.tstzrange:return Es(e);default:return Es(e)}},Es=s=>s,Ta=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Ea=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Oa=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Ca=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let r;const o=s.slice(1,t);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(l=>or(e,l))}return s},xa=s=>typeof s=="string"?s.replace(" ","T"):s;var fi=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})},pi;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(pi||(pi={}));var mi;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes"})(mi||(mi={}));var vi;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(vi||(vi={}));class Ps{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new us(this,at.join,this.params,this.timeout),this.rejoinTimer=new rr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qe.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(at.reply,{},(i,r)=>{this._trigger(this._replyEventName(r),i)}),this.presence=new yn(this)}subscribe(e,t=this.timeout){var n,i;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:o}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:r,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,d=(c=h==null?void 0:h.length)!==null&&c!==void 0?c:0,p=[];for(let f=0;f<d;f++){const m=h[f],{filter:{event:b,schema:T,table:E,filter:k}}=m,I=u&&u[f];if(I&&I.event===b&&I.schema===T&&I.table===E&&I.filter===k)p.push(Object.assign(Object.assign({},m),{id:I.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return fi(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return fi(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,n){return this._on(e,t,n)}send(e,t={}){return new Promise(n=>{var i,r,o;const l=this._push(e.type,e,t.timeout||this.timeout);l.rateLimited&&n("rate limited"),e.type==="broadcast"&&!(!((o=(r=(i=this.params)===null||i===void 0?void 0:i.config)===null||r===void 0?void 0:r.broadcast)===null||o===void 0)&&o.ack)&&n("ok"),l.receive("ok",()=>n("ok")),l.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Qe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(at.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new us(this,at.leave,{},e);i.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new us(this,e,t,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,r;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:u,join:c}=at;if(n&&[l,a,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var f,m,b;return((f=p.filter)===null||f===void 0?void 0:f.event)==="*"||((b=(m=p.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(d,n)):(r=this.bindings[o])===null||r===void 0||r.filter(p=>{var f,m,b,T,E,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const I=p.id,F=(f=p.filter)===null||f===void 0?void 0:f.event;return I&&((m=t.ids)===null||m===void 0?void 0:m.includes(I))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const I=(E=(T=p==null?void 0:p.filter)===null||T===void 0?void 0:T.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return I==="*"||I===((k=t==null?void 0:t.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof d=="object"&&"ids"in d){const f=d.data,{schema:m,table:b,commit_timestamp:T,type:E,errors:k}=f;d=Object.assign(Object.assign({},{schema:m,table:b,commit_timestamp:T,eventType:E,new:{},old:{},errors:k}),this._getPayloadRecords(f))}p.callback(d,n)})}_isClosed(){return this.state===Qe.closed}_isJoined(){return this.state===Qe.joined}_isJoining(){return this.state===Qe.joining}_isLeaving(){return this.state===Qe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),r={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===n&&Ps.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(at.close,{},e)}_onError(e){this._on(at.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=di(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=di(e.columns,e.old_record)),t}}var hs=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const ka=()=>{};class Aa{constructor(e,t){var n;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=_a,this.params={},this.timeout=ir,this.transport=ma.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ka,this.conn=null,this.sendBuffer=[],this.serializer=new ba,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${Ts.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(r,o)=>o(JSON.stringify(r)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new rr(()=>hs(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return hs(this,void 0,void 0,function*(){const t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return hs(this,void 0,void 0,function*(){const e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case gn.connecting:return Vt.Connecting;case gn.open:return Vt.Open;case gn.closing:return Vt.Closing;default:return Vt.Closed}}isConnected(){return this.connectionState()===Vt.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const n=new Ps(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:i,ref:r}=e;let o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};if(this.log("push",`${t} ${n} (${r})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(at.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ga}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:r,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(r==null?void 0:r.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,r),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(i,r,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(at.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ya,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class Rs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function $e(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Ia extends Rs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _i extends Rs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ar=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const lr=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ar(void 0,void 0,void 0,function*(){return yield(yield Kn(()=>Promise.resolve().then(()=>kn),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Sa=()=>ar(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Kn(()=>Promise.resolve().then(()=>kn),void 0,import.meta.url)).Response:Response});var ln=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const ds=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Na=(s,e)=>ln(void 0,void 0,void 0,function*(){const t=yield Sa();s instanceof t?s.json().then(n=>{e(new Ia(ds(n),s.status||500))}).catch(n=>{e(new _i(ds(n),n))}):e(new _i(ds(s),s))}),Da=(s,e,t,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};function Zn(s,e,t,n,i,r){return ln(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(t,Da(e,n,i,r)).then(a=>{if(!a.ok)throw a;return n!=null&&n.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Na(a,l))})})}function Os(s,e,t,n){return ln(this,void 0,void 0,function*(){return Zn(s,"GET",e,t,n)})}function At(s,e,t,n,i){return ln(this,void 0,void 0,function*(){return Zn(s,"POST",e,n,i,t)})}function Pa(s,e,t,n,i){return ln(this,void 0,void 0,function*(){return Zn(s,"PUT",e,n,i,t)})}function cr(s,e,t,n,i){return ln(this,void 0,void 0,function*(){return Zn(s,"DELETE",e,n,i,t)})}var rt=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const Ra={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ja{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=lr(i)}uploadOrUpdate(e,t,n,i){return rt(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},gi),i),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&n instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),r.append("",n)):typeof FormData<"u"&&n instanceof FormData?(r=n,r.append("cacheControl",o.cacheControl)):(r=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(t),u=this._getFinalPath(a),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:r,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return c.ok?{data:{path:a},error:null}:{data:null,error:yield c.json()}}catch(r){if($e(r))return{data:null,error:r};throw r}})}upload(e,t,n){return rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return rt(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),o=this._getFinalPath(r),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let a;const u=Object.assign({upsert:gi.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",u.cacheControl)):(a=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:c});return h.ok?{data:{path:r},error:null}:{data:null,error:yield h.json()}}catch(a){if($e(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return rt(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const n=yield At(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),i=new URL(this.url+n.url),r=i.searchParams.get("token");if(!r)throw new Rs("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:r},error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}update(e,t,n){return rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t){return rt(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}copy(e,t){return rt(this,void 0,void 0,function*(){try{return{data:{path:(yield At(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,n){return rt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),r=yield At(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if($e(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return rt(this,void 0,void 0,function*(){try{const i=yield At(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if($e(i))return{data:null,error:i};throw i}})}download(e,t){return rt(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=r?`?${r}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Os(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if($e(l))return{data:null,error:l};throw l}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&i.push(r);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&i.push(a);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return rt(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}list(e,t,n){return rt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ra),t),{prefix:e||""});return{data:yield At(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if($e(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const La="2.5.1",Ma={"X-Client-Info":`storage-js/${La}`};var Xt=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};class Fa{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Ma),t),this.fetch=lr(n)}listBuckets(){return Xt(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if($e(e))return{data:null,error:e};throw e}})}getBucket(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Xt(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Xt(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}}class Ua extends Fa{constructor(e,t={},n){super(e,t,n)}from(e){return new ja(this.url,this.headers,e,this.fetch)}}const $a="2.26.0",Ba={"X-Client-Info":`supabase-js/${$a}`};var qa=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const Va=s=>{let e;return s?e=s:typeof fetch>"u"?e=on:e=fetch,(...t)=>e(...t)},za=()=>typeof Headers>"u"?wn.Headers:Headers,Ga=(s,e,t)=>{const n=Va(t),i=za();return(r,o)=>qa(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:s;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${a}`),n(r,Object.assign(Object.assign({},o),{headers:u}))})};function Ha(s){return s.replace(/\/$/,"")}function Ja(s,e){const{db:t,auth:n,realtime:i,global:r}=s,{db:o,auth:l,realtime:a,global:u}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},a),i),global:Object.assign(Object.assign({},u),r)}}var Kt=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};function Ka(s){return Math.round(Date.now()/1e3)+s}function Ya(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const wt=()=>typeof document<"u",Bt={tested:!1,writable:!1},Un=()=>{if(!wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bt.tested)return Bt.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Bt.tested=!0,Bt.writable=!0}catch{Bt.tested=!0,Bt.writable=!1}return Bt.writable};function We(s,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),s=s.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+s+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const ur=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Kt(void 0,void 0,void 0,function*(){return yield(yield Kn(()=>Promise.resolve().then(()=>kn),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Wa=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",dn=(s,e,t)=>Kt(void 0,void 0,void 0,function*(){yield s.setItem(e,JSON.stringify(t))}),Nn=(s,e)=>Kt(void 0,void 0,void 0,function*(){const t=yield s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),fs=(s,e)=>Kt(void 0,void 0,void 0,function*(){yield s.removeItem(e)});function Za(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,i,r,o,l,a,u,c=0;for(s=s.replace("-","+").replace("_","/");c<s.length;)o=e.indexOf(s.charAt(c++)),l=e.indexOf(s.charAt(c++)),a=e.indexOf(s.charAt(c++)),u=e.indexOf(s.charAt(c++)),n=o<<2|l>>4,i=(l&15)<<4|a>>2,r=(a&3)<<6|u,t=t+String.fromCharCode(n),a!=64&&i!=0&&(t=t+String.fromCharCode(i)),u!=64&&r!=0&&(t=t+String.fromCharCode(r));return t}class Xn{constructor(){this.promise=new Xn.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Xn.promiseConstructor=Promise;function yi(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(Za(n))}function Xa(s){return new Promise(e=>{setTimeout(()=>e(null),s)})}function Qa(s,e){return new Promise((n,i)=>{Kt(this,void 0,void 0,function*(){for(let r=0;r<1/0;r++)try{const o=yield s(r);if(!e(r,null,o)){n(o);return}}catch(o){if(!e(r,o)){i(o);return}}})})}function el(s){return("0"+s.toString(16)).substr(-2)}function Dn(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let r=0;r<56;r++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,el).join("")}function tl(s){return Kt(this,void 0,void 0,function*(){const t=new TextEncoder().encode(s),n=yield crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(r=>String.fromCharCode(r)).join("")})}function nl(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Pn(s){return Kt(this,void 0,void 0,function*(){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const e=yield tl(s);return nl(e)})}class js extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function re(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class sl extends js{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function il(s){return re(s)&&s.name==="AuthApiError"}class hr extends js{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class cn extends js{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Qt extends cn{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class ps extends cn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Rn extends cn{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class bt extends cn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ms extends cn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cs extends cn{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function bi(s){return re(s)&&s.name==="AuthRetryableFetchError"}var Ls=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})},rl=globalThis&&globalThis.__rest||function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t};const mn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),ol=[502,503,504];function wi(s){return Ls(this,void 0,void 0,function*(){if(!Wa(s))throw new Cs(mn(s),0);if(ol.includes(s.status))throw new Cs(mn(s),s.status);let e;try{e=yield s.json()}catch(t){throw new hr(mn(t),t)}throw new sl(mn(e),s.status||500)})}const al=(s,e,t,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};function le(s,e,t,n){var i;return Ls(this,void 0,void 0,function*(){const r=Object.assign({},n==null?void 0:n.headers);n!=null&&n.jwt&&(r.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=yield ll(s,e,t+l,{headers:r,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(a):{data:Object.assign({},a),error:null}})}function ll(s,e,t,n,i,r){return Ls(this,void 0,void 0,function*(){const o=al(e,n,i,r);let l;try{l=yield s(t,o)}catch(a){throw console.error(a),new Cs(mn(a),0)}if(l.ok||(yield wi(l)),n!=null&&n.noResolveJson)return l;try{return yield l.json()}catch(a){yield wi(a)}})}function Ct(s){var e;let t=null;dl(s)&&(t=Object.assign({},s),t.expires_at=Ka(s.expires_in));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function zt(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function cl(s){return{data:s,error:null}}function ul(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:r}=s,o=rl(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:r},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function hl(s){return s}function dl(s){return s.access_token&&s.refresh_token&&s.expires_in}var lt=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})},fl=globalThis&&globalThis.__rest||function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t};class pl{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=ur(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return lt(this,void 0,void 0,function*(){try{return yield le(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(re(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return lt(this,void 0,void 0,function*(){try{return yield le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:zt})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}})}generateLink(e){return lt(this,void 0,void 0,function*(){try{const{options:t}=e,n=fl(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),yield le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ul,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(re(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return lt(this,void 0,void 0,function*(){try{return yield le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:zt})}catch(t){if(re(t))return{data:{user:null},error:t};throw t}})}listUsers(e){var t,n,i,r,o,l,a;return lt(this,void 0,void 0,function*(){try{const u={nextPage:null,lastPage:0,total:0},c=yield le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:hl});if(c.error)throw c.error;const h=yield c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(a=(l=c.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return p.length>0&&(p.forEach(f=>{const m=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(f.split(";")[1].split("=")[1]);u[`${b}Page`]=m}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{users:[]},error:u};throw u}})}getUserById(e){return lt(this,void 0,void 0,function*(){try{return yield le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:zt})}catch(t){if(re(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return lt(this,void 0,void 0,function*(){try{return yield le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:zt})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}})}deleteUser(e,t=!1){return lt(this,void 0,void 0,function*(){try{return yield le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:zt})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}})}_listFactors(e){return lt(this,void 0,void 0,function*(){try{const{data:t,error:n}=yield le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(re(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return lt(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(re(t))return{data:null,error:t};throw t}})}}const ml="2.37.0",vl="http://localhost:9999",_l="supabase.auth.token",gl={"X-Client-Info":`gotrue-js/${ml}`},Ti=10,Ei={getItem:s=>Un()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{Un()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{Un()&&globalThis.localStorage.removeItem(s)}};function yl(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var G=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};yl();const bl={url:vl,storageKey:_l,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gl,flowType:"implicit",debug:!1},jn=30*1e3,Oi=3;class En{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=En.nextInstanceID,En.nextInstanceID+=1,this.instanceID>0&&wt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},bl),e);if(this.logDebugMessages=n.debug,this.inMemorySession=null,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.persistSession=n.persistSession,this.storage=n.storage||Ei,this.admin=new pl({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ur(n.fetch),this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===Ei&&!Un()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",i=>G(this,void 0,void 0,function*(){this._debug("received broadcast notification from other tab or client",i),yield this._notifyAllSubscribers(i.data.event,i.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return G(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{const e=wt()?yield this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=yield this._getSessionFromUrl(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),yield this._removeSession(),{error:n};const{session:i,redirectType:r}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",r),yield this._saveSession(i),setTimeout(()=>G(this,void 0,void 0,function*(){r==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",i):yield this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return re(e)?{error:e}:{error:new hr("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signUp(e){var t,n,i;return G(this,void 0,void 0,function*(){try{yield this._removeSession();let r;if("email"in e){const{email:c,password:h,options:d}=e;let p=null,f=null;if(this.flowType==="pkce"){const m=Dn();yield dn(this.storage,`${this.storageKey}-code-verifier`,m),p=yield Pn(m),f=m===p?"plain":"s256"}r=yield le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:f},xform:Ct})}else if("phone"in e){const{phone:c,password:h,options:d}=e;r=yield le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ct})}else throw new Rn("You must provide either an email or phone number and a password");const{data:o,error:l}=r;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithPassword(e){return G(this,void 0,void 0,function*(){try{yield this._removeSession();let t;if("email"in e){const{email:r,password:o,options:l}=e;t=yield le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ct})}else if("phone"in e){const{phone:r,password:o,options:l}=e;t=yield le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ct})}else throw new Rn("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ps}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:i})}catch(t){if(re(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){var t,n,i,r;return G(this,void 0,void 0,function*(){return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})})}exchangeCodeForSession(e){return G(this,void 0,void 0,function*(){const t=yield Nn(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:i}=yield le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Ct});return yield fs(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ps}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:i})})}signInWithIdToken(e){return G(this,void 0,void 0,function*(){yield this._removeSession();try{const{options:t,provider:n,token:i,access_token:r,nonce:o}=e,l=yield le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ct}),{data:a,error:u}=l;return u?{data:{user:null,session:null},error:u}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new ps}:(a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:u})}catch(t){if(re(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){var t,n,i,r,o;return G(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:l,options:a}=e;let u=null,c=null;if(this.flowType==="pkce"){const d=Dn();yield dn(this.storage,`${this.storageKey}-code-verifier`,d),u=yield Pn(d),c=d===u?"plain":"s256"}const{error:h}=yield le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(n=a==null?void 0:a.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:a}=e,{data:u,error:c}=yield le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=a==null?void 0:a.data)!==null&&i!==void 0?i:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Rn("You must provide either an email or phone number.")}catch(l){if(re(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){var t,n;return G(this,void 0,void 0,function*(){try{e.type!=="email_change"&&e.type!=="phone_change"&&(yield this._removeSession());const{data:i,error:r}=yield le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,xform:Ct});if(r)throw r;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return o!=null&&o.access_token&&(yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(e){var t,n,i;return G(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:cl})}catch(r){if(re(r))return{data:null,error:r};throw r}})}reauthenticate(){return G(this,void 0,void 0,function*(){try{const{data:{session:e},error:t}=yield this.getSession();if(t)throw t;if(!e)throw new Qt;const{error:n}=yield le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:n}}catch(e){if(re(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return G(this,void 0,void 0,function*(){try{yield this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:r}=e,{error:o}=yield le(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:r}=e,{data:o,error:l}=yield le(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Rn("You must provide either an email or phone number and a type")}catch(t){if(re(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return G(this,void 0,void 0,function*(){yield this.initializePromise,this._debug("#getSession()","begin");try{let e=null;if(this.persistSession){const r=yield Nn(this.storage,this.storageKey);this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#getSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:n,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#getSession()","end")}})}getUser(e){var t,n;return G(this,void 0,void 0,function*(){try{if(!e){const{data:i,error:r}=yield this.getSession();if(r)throw r;e=(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:void 0}return yield le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:zt})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}})}updateUser(e,t={}){return G(this,void 0,void 0,function*(){try{const{data:n,error:i}=yield this.getSession();if(i)throw i;if(!n.session)throw new Qt;const r=n.session,{data:o,error:l}=yield le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:r.access_token,xform:zt});if(l)throw l;return r.user=o.user,yield this._saveSession(r),yield this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}}catch(n){if(re(n))return{data:{user:null},error:n};throw n}})}_decodeJWT(e){return yi(e)}setSession(e){return G(this,void 0,void 0,function*(){try{if(!e.access_token||!e.refresh_token)throw new Qt;const t=Date.now()/1e3;let n=t,i=!0,r=null;const o=yi(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{session:l,error:a}=yield this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};r=l}else{const{data:l,error:a}=yield this.getUser(e.access_token);if(a)throw a;r={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},yield this._saveSession(r),yield this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(re(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return G(this,void 0,void 0,function*(){try{if(!e){const{data:r,error:o}=yield this.getSession();if(o)throw o;e=(t=r.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new Qt;const{session:n,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}})}_getSessionFromUrl(e){return G(this,void 0,void 0,function*(){try{if(!wt())throw new bt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new bt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ms("Not a valid PKCE flow url.");if(e){const b=We("code");if(!b)throw new ms("No code detected.");const{data:T,error:E}=yield this.exchangeCodeForSession(b);if(E)throw E;if(!T.session)throw new ms("No session detected.");let k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:T.session,redirectType:null},error:null}}const t=We("error_description");if(t){const b=We("error_code");if(!b)throw new bt("No error_code detected.");const T=We("error");throw T?new bt(t,{error:T,code:b}):new bt("No error detected.")}const n=We("provider_token"),i=We("provider_refresh_token"),r=We("access_token");if(!r)throw new bt("No access_token detected.");const o=We("expires_in");if(!o)throw new bt("No expires_in detected.");const l=We("refresh_token");if(!l)throw new bt("No refresh_token detected.");const a=We("token_type");if(!a)throw new bt("No token_type detected.");const c=Math.round(Date.now()/1e3)+parseInt(o),{data:h,error:d}=yield this.getUser(r);if(d)throw d;const p=h.user,f={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:parseInt(o),expires_at:c,refresh_token:l,token_type:a,user:p},m=We("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:f,redirectType:m},error:null}}catch(t){if(re(t))return{data:{session:null,redirectType:null},error:t};throw t}})}_isImplicitGrantFlow(){return wt()&&(!!We("access_token")||!!We("error_description"))}_isPKCEFlow(){return G(this,void 0,void 0,function*(){const e=yield Nn(this.storage,`${this.storageKey}-code-verifier`);return!!We("code")&&!!e})}signOut(){var e;return G(this,void 0,void 0,function*(){const{data:t,error:n}=yield this.getSession();if(n)return{error:n};const i=(e=t.session)===null||e===void 0?void 0:e.access_token;if(i){const{error:r}=yield this.admin.signOut(i);if(r&&!(il(r)&&(r.status===404||r.status===401)))return{error:r}}return yield this._removeSession(),yield fs(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=Ya(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),this._emitInitialSession(t),{data:{subscription:n}}}_emitInitialSession(e){var t,n;return G(this,void 0,void 0,function*(){try{const{data:{session:i},error:r}=yield this.getSession();if(r)throw r;yield(t=this.stateChangeEmitters.get(e))===null||t===void 0?void 0:t.callback("INITIAL_SESSION",i),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){yield(n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}resetPasswordForEmail(e,t={}){return G(this,void 0,void 0,function*(){let n=null,i=null;if(this.flowType==="pkce"){const r=Dn();yield dn(this.storage,`${this.storageKey}-code-verifier`,r),n=yield Pn(r),i=r===n?"plain":"s256"}try{return yield le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(re(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return G(this,void 0,void 0,function*(){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return yield Qa(i=>G(this,void 0,void 0,function*(){return yield Xa(i*200),this._debug(t,"refreshing attempt",i),yield le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ct})}),(i,r,o)=>o&&o.error&&bi(o.error)&&Date.now()+(i+1)*200-n<jn)}catch(n){if(this._debug(t,"error",n),re(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return G(this,void 0,void 0,function*(){const n=yield this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),wt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}})}_recoverAndRefresh(){var e;return G(this,void 0,void 0,function*(){const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=yield Nn(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&(yield this._removeSession());return}const i=Math.round(Date.now()/1e3),r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<i+Ti;if(this._debug(t,`session has${r?"":" not"} expired with margin of ${Ti}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=yield this._callRefreshToken(n.refresh_token);o&&(console.error(o),bi(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}})}_callRefreshToken(e){var t,n;return G(this,void 0,void 0,function*(){if(!e)throw new Qt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Xn;const{data:r,error:o}=yield this._refreshAccessToken(e);if(o)throw o;if(!r.session)throw new Qt;yield this._saveSession(r.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const l={session:r.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(r){if(this._debug(i,"error",r),re(r)){const o={session:null,error:r};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}})}_notifyAllSubscribers(e,t,n=!0){return G(this,void 0,void 0,function*(){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(l=>G(this,void 0,void 0,function*(){try{yield l.callback(e,t)}catch(a){r.push(a)}}));if(yield Promise.all(o),r.length>0){for(let l=0;l<r.length;l+=1)console.error(r[l]);throw r[0]}}finally{this._debug(i,"end")}})}_saveSession(e){return G(this,void 0,void 0,function*(){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return this._debug("#_persistSession()",e),dn(this.storage,this.storageKey,e)}_removeSession(){return G(this,void 0,void 0,function*(){this._debug("#_removeSession()"),this.persistSession?yield fs(this.storage,this.storageKey):this.inMemorySession=null})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return G(this,void 0,void 0,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),yield this._autoRefreshTokenTick()})}_stopAutoRefresh(){return G(this,void 0,void 0,function*(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return G(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return G(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return G(this,void 0,void 0,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{const{data:{session:t}}=yield this.getSession();if(!t||!t.refresh_token||!t.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((t.expires_at*1e3-e)/jn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${jn}ms, refresh threshold is ${Oi} ticks`),n<=Oi&&(yield this._callRefreshToken(t.refresh_token))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}_handleVisibilityChange(){return G(this,void 0,void 0,function*(){if(this._debug("#_handleVisibilityChange()"),!wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>G(this,void 0,void 0,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return G(this,void 0,void 0,function*(){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(yield this.initializePromise,yield this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t){return G(this,void 0,void 0,function*(){const n=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const i=Dn();yield dn(this.storage,`${this.storageKey}-code-verifier`,i);const r=yield Pn(i),o=i===r?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",r,"method",o);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(t!=null&&t.queryParams){const i=new URLSearchParams(t.queryParams);n.push(i.toString())}return`${this.url}/authorize?${n.join("&")}`})}_unenroll(e){var t;return G(this,void 0,void 0,function*(){try{const{data:n,error:i}=yield this.getSession();return i?{data:null,error:i}:yield le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token})}catch(n){if(re(n))return{data:null,error:n};throw n}})}_enroll(e){var t,n;return G(this,void 0,void 0,function*(){try{const{data:i,error:r}=yield this.getSession();if(r)return{data:null,error:r};const{data:o,error:l}=yield le(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=i==null?void 0:i.session)===null||t===void 0?void 0:t.access_token});return l?{data:null,error:l}:(!((n=o==null?void 0:o.totp)===null||n===void 0)&&n.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}catch(i){if(re(i))return{data:null,error:i};throw i}})}_verify(e){var t;return G(this,void 0,void 0,function*(){try{const{data:n,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:r,error:o}=yield le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:o})}catch(n){if(re(n))return{data:null,error:n};throw n}})}_challenge(e){var t;return G(this,void 0,void 0,function*(){try{const{data:n,error:i}=yield this.getSession();return i?{data:null,error:i}:yield le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token})}catch(n){if(re(n))return{data:null,error:n};throw n}})}_challengeAndVerify(e){return G(this,void 0,void 0,function*(){const{data:t,error:n}=yield this._challenge({factorId:e.factorId});return n?{data:null,error:n}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return G(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],i=n.filter(r=>r.factor_type==="totp"&&r.status==="verified");return{data:{all:n,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return G(this,void 0,void 0,function*(){const{data:{session:n},error:i}=yield this.getSession();if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const r=this._decodeJWT(n.access_token);let o=null;r.aal&&(o=r.aal);let l=o;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(l="aal2");const u=r.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}})}}En.nextInstanceID=0;class wl extends En{constructor(e){super(e)}}var Tl=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{u(n.next(c))}catch(h){o(h)}}function a(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const El={headers:Ba},Ol={schema:"public"},Cl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xl={};class kl{constructor(e,t,n){var i,r,o,l,a,u,c,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=Ha(e);this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const p=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f={db:Ol,realtime:xl,auth:Object.assign(Object.assign({},Cl),{storageKey:p}),global:El},m=Ja(n??{},f);this.storageKey=(r=(i=m.auth)===null||i===void 0?void 0:i.storageKey)!==null&&r!==void 0?r:"",this.headers=(l=(o=m.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=m.auth)!==null&&a!==void 0?a:{},this.headers,(u=m.global)===null||u===void 0?void 0:u.fetch),this.fetch=Ga(t,this._getAccessToken.bind(this),(c=m.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},m.realtime)),this.rest=new Jo(`${d}/rest/v1`,{headers:this.headers,schema:(h=m.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Bo(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ua(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},n){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Tl(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:r,flowType:o},l,a){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wl({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,flowType:o,fetch:a})}_initRealtimeClient(e){return new Aa(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Al=(s,e,t)=>new kl(s,e,t),Ci=Al("https://mifvquxknwmbszdrqwio.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pZnZxdXhrbndtYnN6ZHJxd2lvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODcyMjMxNTQsImV4cCI6MjAwMjc5OTE1NH0.mukAyCyXroPUWSkPx8lAiLwDBHvtMBoW334LPwsbCsg");function xi(s){let e,t,n="State:",i,r,o,l="Alabama",a,u="Alaska",c,h="Arizona",d,p="Arkansas",f,m="California",b,T="Colorado",E,k="Connecticut",I,F="Delaware",Y,j="District Of Columbia",S,W="Florida",$,se="Georgia",ue,K="Hawaii",_,O="Idaho",R,Z="Illinois",V,x="Indiana",B,X="Iowa",D,be="Kansas",ae,ge="Kentucky",Ce,Xe="Louisiana",Ee,_e="Maine",J,fe="Maryland",Oe,xe="Massachusetts",ie,oe="Michigan",te,Dt="Minnesota",qe,Me="Mississippi",Ne,z="Missouri",U,Ve="Montana",ke,we="Nebraska",Te,Fe="Nevada",Ue,Yt="New Hampshire",Ge,Pt="New Jersey",He,Rt="New Mexico",Je,Et="New York",De,Wt="North Carolina",st,Se="North Dakota",he,Pe="Ohio",pe,Re="Oklahoma",me,ze="Oregon",H,jt="Pennsylvania",Ke,Lt="Rhode Island",ye,Mt="South Carolina",Ye,Ft="South Dakota",it,Ms="Tennessee",ht,Fs="Texas",dt,Us="Utah",ft,$s="Vermont",pt,Bs="Virginia",mt,qs="Washington",vt,Vs="West Virginia",_t,zs="Wisconsin",gt,Gs="Wyoming",yt,Hs="All",Qn,Js;return{c(){e=g("div"),t=g("label"),t.textContent=n,i=Q(),r=g("select"),o=g("option"),o.textContent=l,a=g("option"),a.textContent=u,c=g("option"),c.textContent=h,d=g("option"),d.textContent=p,f=g("option"),f.textContent=m,b=g("option"),b.textContent=T,E=g("option"),E.textContent=k,I=g("option"),I.textContent=F,Y=g("option"),Y.textContent=j,S=g("option"),S.textContent=W,$=g("option"),$.textContent=se,ue=g("option"),ue.textContent=K,_=g("option"),_.textContent=O,R=g("option"),R.textContent=Z,V=g("option"),V.textContent=x,B=g("option"),B.textContent=X,D=g("option"),D.textContent=be,ae=g("option"),ae.textContent=ge,Ce=g("option"),Ce.textContent=Xe,Ee=g("option"),Ee.textContent=_e,J=g("option"),J.textContent=fe,Oe=g("option"),Oe.textContent=xe,ie=g("option"),ie.textContent=oe,te=g("option"),te.textContent=Dt,qe=g("option"),qe.textContent=Me,Ne=g("option"),Ne.textContent=z,U=g("option"),U.textContent=Ve,ke=g("option"),ke.textContent=we,Te=g("option"),Te.textContent=Fe,Ue=g("option"),Ue.textContent=Yt,Ge=g("option"),Ge.textContent=Pt,He=g("option"),He.textContent=Rt,Je=g("option"),Je.textContent=Et,De=g("option"),De.textContent=Wt,st=g("option"),st.textContent=Se,he=g("option"),he.textContent=Pe,pe=g("option"),pe.textContent=Re,me=g("option"),me.textContent=ze,H=g("option"),H.textContent=jt,Ke=g("option"),Ke.textContent=Lt,ye=g("option"),ye.textContent=Mt,Ye=g("option"),Ye.textContent=Ft,it=g("option"),it.textContent=Ms,ht=g("option"),ht.textContent=Fs,dt=g("option"),dt.textContent=Us,ft=g("option"),ft.textContent=$s,pt=g("option"),pt.textContent=Bs,mt=g("option"),mt.textContent=qs,vt=g("option"),vt.textContent=Vs,_t=g("option"),_t.textContent=zs,gt=g("option"),gt.textContent=Gs,yt=g("option"),yt.textContent=Hs,this.h()},l(Ut){e=y(Ut,"DIV",{class:!0});var Ot=ce(e);t=y(Ot,"LABEL",{["data-svelte-h"]:!0}),A(t)!=="svelte-rqu1rn"&&(t.textContent=n),i=ee(Ot),r=y(Ot,"SELECT",{name:!0,class:!0});var M=ce(r);o=y(M,"OPTION",{["data-svelte-h"]:!0}),A(o)!=="svelte-c5psfc"&&(o.textContent=l),a=y(M,"OPTION",{["data-svelte-h"]:!0}),A(a)!=="svelte-1icpe5l"&&(a.textContent=u),c=y(M,"OPTION",{["data-svelte-h"]:!0}),A(c)!=="svelte-zp7i65"&&(c.textContent=h),d=y(M,"OPTION",{["data-svelte-h"]:!0}),A(d)!=="svelte-1br4p97"&&(d.textContent=p),f=y(M,"OPTION",{["data-svelte-h"]:!0}),A(f)!=="svelte-eauyh0"&&(f.textContent=m),b=y(M,"OPTION",{["data-svelte-h"]:!0}),A(b)!=="svelte-iuxpmt"&&(b.textContent=T),E=y(M,"OPTION",{["data-svelte-h"]:!0}),A(E)!=="svelte-vw0wcq"&&(E.textContent=k),I=y(M,"OPTION",{["data-svelte-h"]:!0}),A(I)!=="svelte-5qs6so"&&(I.textContent=F),Y=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Y)!=="svelte-19bzj5y"&&(Y.textContent=j),S=y(M,"OPTION",{["data-svelte-h"]:!0}),A(S)!=="svelte-ki5qej"&&(S.textContent=W),$=y(M,"OPTION",{["data-svelte-h"]:!0}),A($)!=="svelte-8fxw64"&&($.textContent=se),ue=y(M,"OPTION",{["data-svelte-h"]:!0}),A(ue)!=="svelte-1jl33t8"&&(ue.textContent=K),_=y(M,"OPTION",{["data-svelte-h"]:!0}),A(_)!=="svelte-1fd1fj6"&&(_.textContent=O),R=y(M,"OPTION",{["data-svelte-h"]:!0}),A(R)!=="svelte-f3aqum"&&(R.textContent=Z),V=y(M,"OPTION",{["data-svelte-h"]:!0}),A(V)!=="svelte-1q7wlyn"&&(V.textContent=x),B=y(M,"OPTION",{["data-svelte-h"]:!0}),A(B)!=="svelte-zoomdw"&&(B.textContent=X),D=y(M,"OPTION",{["data-svelte-h"]:!0}),A(D)!=="svelte-p97no1"&&(D.textContent=be),ae=y(M,"OPTION",{["data-svelte-h"]:!0}),A(ae)!=="svelte-16wqeyk"&&(ae.textContent=ge),Ce=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Ce)!=="svelte-11deyr2"&&(Ce.textContent=Xe),Ee=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Ee)!=="svelte-i0hmiu"&&(Ee.textContent=_e),J=y(M,"OPTION",{["data-svelte-h"]:!0}),A(J)!=="svelte-o5744j"&&(J.textContent=fe),Oe=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Oe)!=="svelte-simfqu"&&(Oe.textContent=xe),ie=y(M,"OPTION",{["data-svelte-h"]:!0}),A(ie)!=="svelte-121gfm2"&&(ie.textContent=oe),te=y(M,"OPTION",{["data-svelte-h"]:!0}),A(te)!=="svelte-7wd2i1"&&(te.textContent=Dt),qe=y(M,"OPTION",{["data-svelte-h"]:!0}),A(qe)!=="svelte-1wwp0uf"&&(qe.textContent=Me),Ne=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Ne)!=="svelte-1198rpp"&&(Ne.textContent=z),U=y(M,"OPTION",{["data-svelte-h"]:!0}),A(U)!=="svelte-h64i1j"&&(U.textContent=Ve),ke=y(M,"OPTION",{["data-svelte-h"]:!0}),A(ke)!=="svelte-buc1uy"&&(ke.textContent=we),Te=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Te)!=="svelte-4fq7zz"&&(Te.textContent=Fe),Ue=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Ue)!=="svelte-w8u0jh"&&(Ue.textContent=Yt),Ge=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Ge)!=="svelte-12e9ufo"&&(Ge.textContent=Pt),He=y(M,"OPTION",{["data-svelte-h"]:!0}),A(He)!=="svelte-1e134ua"&&(He.textContent=Rt),Je=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Je)!=="svelte-rkjkvq"&&(Je.textContent=Et),De=y(M,"OPTION",{["data-svelte-h"]:!0}),A(De)!=="svelte-on4i83"&&(De.textContent=Wt),st=y(M,"OPTION",{["data-svelte-h"]:!0}),A(st)!=="svelte-2pjgh9"&&(st.textContent=Se),he=y(M,"OPTION",{["data-svelte-h"]:!0}),A(he)!=="svelte-g6mro2"&&(he.textContent=Pe),pe=y(M,"OPTION",{["data-svelte-h"]:!0}),A(pe)!=="svelte-mspor2"&&(pe.textContent=Re),me=y(M,"OPTION",{["data-svelte-h"]:!0}),A(me)!=="svelte-10kdbwh"&&(me.textContent=ze),H=y(M,"OPTION",{["data-svelte-h"]:!0}),A(H)!=="svelte-1nwa0t7"&&(H.textContent=jt),Ke=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Ke)!=="svelte-oc9ug6"&&(Ke.textContent=Lt),ye=y(M,"OPTION",{["data-svelte-h"]:!0}),A(ye)!=="svelte-22h0si"&&(ye.textContent=Mt),Ye=y(M,"OPTION",{["data-svelte-h"]:!0}),A(Ye)!=="svelte-1m5hglw"&&(Ye.textContent=Ft),it=y(M,"OPTION",{["data-svelte-h"]:!0}),A(it)!=="svelte-1n48050"&&(it.textContent=Ms),ht=y(M,"OPTION",{["data-svelte-h"]:!0}),A(ht)!=="svelte-1eqwp6l"&&(ht.textContent=Fs),dt=y(M,"OPTION",{["data-svelte-h"]:!0}),A(dt)!=="svelte-a1ieih"&&(dt.textContent=Us),ft=y(M,"OPTION",{["data-svelte-h"]:!0}),A(ft)!=="svelte-5x6ugt"&&(ft.textContent=$s),pt=y(M,"OPTION",{["data-svelte-h"]:!0}),A(pt)!=="svelte-1pw7v84"&&(pt.textContent=Bs),mt=y(M,"OPTION",{["data-svelte-h"]:!0}),A(mt)!=="svelte-1hv0hfw"&&(mt.textContent=qs),vt=y(M,"OPTION",{["data-svelte-h"]:!0}),A(vt)!=="svelte-iyk9ed"&&(vt.textContent=Vs),_t=y(M,"OPTION",{["data-svelte-h"]:!0}),A(_t)!=="svelte-1htzi0r"&&(_t.textContent=zs),gt=y(M,"OPTION",{["data-svelte-h"]:!0}),A(gt)!=="svelte-1bk3nr8"&&(gt.textContent=Gs),yt=y(M,"OPTION",{["data-svelte-h"]:!0}),A(yt)!=="svelte-421o1o"&&(yt.textContent=Hs),M.forEach(P),Ot.forEach(P),this.h()},h(){o.__value="AL",N(o,o.__value),a.__value="AK",N(a,a.__value),c.__value="AZ",N(c,c.__value),d.__value="AR",N(d,d.__value),f.__value="CA",N(f,f.__value),b.__value="CO",N(b,b.__value),E.__value="CT",N(E,E.__value),I.__value="DE",N(I,I.__value),Y.__value="DC",N(Y,Y.__value),S.__value="FL",N(S,S.__value),$.__value="GA",N($,$.__value),ue.__value="HI",N(ue,ue.__value),_.__value="ID",N(_,_.__value),R.__value="IL",N(R,R.__value),V.__value="IN",N(V,V.__value),B.__value="IA",N(B,B.__value),D.__value="KS",N(D,D.__value),ae.__value="KY",N(ae,ae.__value),Ce.__value="LA",N(Ce,Ce.__value),Ee.__value="ME",N(Ee,Ee.__value),J.__value="MD",N(J,J.__value),Oe.__value="MA",N(Oe,Oe.__value),ie.__value="MI",N(ie,ie.__value),te.__value="MN",N(te,te.__value),qe.__value="MS",N(qe,qe.__value),Ne.__value="MO",N(Ne,Ne.__value),U.__value="MT",N(U,U.__value),ke.__value="NE",N(ke,ke.__value),Te.__value="NV",N(Te,Te.__value),Ue.__value="NH",N(Ue,Ue.__value),Ge.__value="NJ",N(Ge,Ge.__value),He.__value="NM",N(He,He.__value),Je.__value="NY",N(Je,Je.__value),De.__value="NC",N(De,De.__value),st.__value="ND",N(st,st.__value),he.__value="OH",N(he,he.__value),pe.__value="OK",N(pe,pe.__value),me.__value="OR",N(me,me.__value),H.__value="PA",N(H,H.__value),Ke.__value="RI",N(Ke,Ke.__value),ye.__value="SC",N(ye,ye.__value),Ye.__value="SD",N(Ye,Ye.__value),it.__value="TN",N(it,it.__value),ht.__value="TX",N(ht,ht.__value),dt.__value="UT",N(dt,dt.__value),ft.__value="VT",N(ft,ft.__value),pt.__value="VA",N(pt,pt.__value),mt.__value="WA",N(mt,mt.__value),vt.__value="WV",N(vt,vt.__value),_t.__value="WI",N(_t,_t.__value),gt.__value="WY",N(gt,gt.__value),yt.__value="all",N(yt,yt.__value),r.required=!0,w(r,"name","state"),w(r,"class","svelte-wl73y9"),s[4]===void 0&&Tt(()=>s[21].call(r)),w(e,"class","filter-item svelte-wl73y9")},m(Ut,Ot){Ie(Ut,e,Ot),v(e,t),v(e,i),v(e,r),v(r,o),v(r,a),v(r,c),v(r,d),v(r,f),v(r,b),v(r,E),v(r,I),v(r,Y),v(r,S),v(r,$),v(r,ue),v(r,_),v(r,R),v(r,V),v(r,B),v(r,D),v(r,ae),v(r,Ce),v(r,Ee),v(r,J),v(r,Oe),v(r,ie),v(r,te),v(r,qe),v(r,Ne),v(r,U),v(r,ke),v(r,Te),v(r,Ue),v(r,Ge),v(r,He),v(r,Je),v(r,De),v(r,st),v(r,he),v(r,pe),v(r,me),v(r,H),v(r,Ke),v(r,ye),v(r,Ye),v(r,it),v(r,ht),v(r,dt),v(r,ft),v(r,pt),v(r,mt),v(r,vt),v(r,_t),v(r,gt),v(r,yt),nn(r,s[4],!0),Qn||(Js=Be(r,"change",s[21]),Qn=!0)},p(Ut,Ot){Ot[0]&16&&nn(r,Ut[4])},d(Ut){Ut&&P(e),Qn=!1,Js()}}}function ki(s){let e,t="Cancel",n,i,r="Loading...",o,l;return{c(){e=g("button"),e.textContent=t,n=Q(),i=g("p"),i.textContent=r,this.h()},l(a){e=y(a,"BUTTON",{class:!0,["data-svelte-h"]:!0}),A(e)!=="svelte-1cka978"&&(e.textContent=t),n=ee(a),i=y(a,"P",{["data-svelte-h"]:!0}),A(i)!=="svelte-qdsr2u"&&(i.textContent=r),this.h()},h(){w(e,"class","svelte-wl73y9")},m(a,u){Ie(a,e,u),Ie(a,n,u),Ie(a,i,u),o||(l=Be(e,"click",s[26]),o=!0)},p:Ln,d(a){a&&(P(e),P(n),P(i)),o=!1,l()}}}function Ai(s){let e,t="There was an error loading the map";return{c(){e=g("p"),e.textContent=t,this.h()},l(n){e=y(n,"P",{class:!0,["data-svelte-h"]:!0}),A(e)!=="svelte-1dl9ebw"&&(e.textContent=t),this.h()},h(){w(e,"class","error svelte-wl73y9")},m(n,i){Ie(n,e,i)},d(n){n&&P(e)}}}function Ii(s){let e,t="No tournaments found";return{c(){e=g("p"),e.textContent=t,this.h()},l(n){e=y(n,"P",{class:!0,["data-svelte-h"]:!0}),A(e)!=="svelte-zqdng6"&&(e.textContent=t),this.h()},h(){w(e,"class","error svelte-wl73y9")},m(n,i){Ie(n,e,i)},d(n){n&&P(e)}}}function Si(s){let e,t="You cannot search for more than 150 tournaments.";return{c(){e=g("p"),e.textContent=t,this.h()},l(n){e=y(n,"P",{class:!0,["data-svelte-h"]:!0}),A(e)!=="svelte-1ia9362"&&(e.textContent=t),this.h()},h(){w(e,"class","error svelte-wl73y9")},m(n,i){Ie(n,e,i)},d(n){n&&P(e)}}}function Ni(s){let e,t="Request cancelled";return{c(){e=g("p"),e.textContent=t,this.h()},l(n){e=y(n,"P",{class:!0,["data-svelte-h"]:!0}),A(e)!=="svelte-s0mo31"&&(e.textContent=t),this.h()},h(){w(e,"class","error svelte-wl73y9")},m(n,i){Ie(n,e,i)},d(n){n&&P(e)}}}function Il(s){let e,t,n,i="Game:",r,o,l,a="Ultimate",u,c="Melee",h,d="Both",p,f,m,b="Country:",T,E,k,I="Canada",F,Y="USA",j,S="Mexico",W,$="Japan",se,ue="France",K,_="United Kingdom",O,R="Germany",Z,V="Italy",x,B="Spain",X,D="Switzerland",be,ae="Netherlands",ge,Ce="Australia",Xe,Ee,_e,J,fe="From:",Oe,xe,ie,oe,te,Dt="To:",qe,Me,Ne,z,U,Ve="Attendees:",ke,we,Te,Fe,Ue,Yt,Ge,Pt,He,Rt,Je,Et,De,Wt,st,Se=s[2]==="US"&&xi(s),he=s[9]&&ki(s),Pe=s[10]&&Ai(),pe=s[11]&&Ii(),Re=s[8]&&Si(),me=s[12]&&Ni();return{c(){e=g("aside"),t=g("div"),n=g("label"),n.textContent=i,r=Q(),o=g("select"),l=g("option"),l.textContent=a,u=g("option"),u.textContent=c,h=g("option"),h.textContent=d,p=Q(),f=g("div"),m=g("label"),m.textContent=b,T=Q(),E=g("select"),k=g("option"),k.textContent=I,F=g("option"),F.textContent=Y,j=g("option"),j.textContent=S,W=g("option"),W.textContent=$,se=g("option"),se.textContent=ue,K=g("option"),K.textContent=_,O=g("option"),O.textContent=R,Z=g("option"),Z.textContent=V,x=g("option"),x.textContent=B,X=g("option"),X.textContent=D,be=g("option"),be.textContent=ae,ge=g("option"),ge.textContent=Ce,Xe=Q(),Se&&Se.c(),Ee=Q(),_e=g("div"),J=g("label"),J.textContent=fe,Oe=Q(),xe=g("input"),ie=Q(),oe=g("div"),te=g("label"),te.textContent=Dt,qe=Q(),Me=g("input"),Ne=Q(),z=g("div"),U=g("label"),U.textContent=Ve,ke=Q(),we=g("input"),Te=Q(),Fe=g("button"),Ue=St("Search"),Yt=Q(),he&&he.c(),Ge=Q(),Pe&&Pe.c(),Pt=Q(),pe&&pe.c(),He=Q(),Re&&Re.c(),Rt=Q(),me&&me.c(),this.h()},l(ze){e=y(ze,"ASIDE",{class:!0});var H=ce(e);t=y(H,"DIV",{class:!0});var jt=ce(t);n=y(jt,"LABEL",{["data-svelte-h"]:!0}),A(n)!=="svelte-1jk3vsw"&&(n.textContent=i),r=ee(jt),o=y(jt,"SELECT",{name:!0,class:!0});var Ke=ce(o);l=y(Ke,"OPTION",{["data-svelte-h"]:!0}),A(l)!=="svelte-1cdxcyd"&&(l.textContent=a),u=y(Ke,"OPTION",{["data-svelte-h"]:!0}),A(u)!=="svelte-1nrpys5"&&(u.textContent=c),h=y(Ke,"OPTION",{["data-svelte-h"]:!0}),A(h)!=="svelte-1twcbz6"&&(h.textContent=d),Ke.forEach(P),jt.forEach(P),p=ee(H),f=y(H,"DIV",{class:!0});var Lt=ce(f);m=y(Lt,"LABEL",{["data-svelte-h"]:!0}),A(m)!=="svelte-13swddg"&&(m.textContent=b),T=ee(Lt),E=y(Lt,"SELECT",{name:!0,class:!0});var ye=ce(E);k=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(k)!=="svelte-tyys68"&&(k.textContent=I),F=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(F)!=="svelte-2pdhiz"&&(F.textContent=Y),j=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(j)!=="svelte-9si9fs"&&(j.textContent=S),W=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(W)!=="svelte-6do99a"&&(W.textContent=$),se=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(se)!=="svelte-y2vlav"&&(se.textContent=ue),K=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(K)!=="svelte-1ykmluz"&&(K.textContent=_),O=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(O)!=="svelte-7kkhwc"&&(O.textContent=R),Z=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(Z)!=="svelte-1a1jgk"&&(Z.textContent=V),x=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(x)!=="svelte-aiji19"&&(x.textContent=B),X=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(X)!=="svelte-1gf2mg8"&&(X.textContent=D),be=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(be)!=="svelte-17tqxry"&&(be.textContent=ae),ge=y(ye,"OPTION",{["data-svelte-h"]:!0}),A(ge)!=="svelte-1m750fk"&&(ge.textContent=Ce),ye.forEach(P),Lt.forEach(P),Xe=ee(H),Se&&Se.l(H),Ee=ee(H),_e=y(H,"DIV",{class:!0});var Mt=ce(_e);J=y(Mt,"LABEL",{["data-svelte-h"]:!0}),A(J)!=="svelte-1jk48ca"&&(J.textContent=fe),Oe=ee(Mt),xe=y(Mt,"INPUT",{name:!0,min:!0,type:!0,class:!0}),Mt.forEach(P),ie=ee(H),oe=y(H,"DIV",{class:!0});var Ye=ce(oe);te=y(Ye,"LABEL",{["data-svelte-h"]:!0}),A(te)!=="svelte-184jef3"&&(te.textContent=Dt),qe=ee(Ye),Me=y(Ye,"INPUT",{name:!0,min:!0,type:!0,class:!0}),Ye.forEach(P),Ne=ee(H),z=y(H,"DIV",{class:!0});var Ft=ce(z);U=y(Ft,"LABEL",{["data-svelte-h"]:!0}),A(U)!=="svelte-iio89"&&(U.textContent=Ve),ke=ee(Ft),we=y(Ft,"INPUT",{name:!0,type:!0,min:!0,class:!0}),Ft.forEach(P),Te=ee(H),Fe=y(H,"BUTTON",{class:!0});var it=ce(Fe);Ue=Nt(it,"Search"),it.forEach(P),Yt=ee(H),he&&he.l(H),Ge=ee(H),Pe&&Pe.l(H),Pt=ee(H),pe&&pe.l(H),He=ee(H),Re&&Re.l(H),Rt=ee(H),me&&me.l(H),H.forEach(P),this.h()},h(){l.__value="1386",N(l,l.__value),u.__value="1",N(u,u.__value),h.__value="1 1386",N(h,h.__value),o.required=!0,w(o,"name","game"),w(o,"class","svelte-wl73y9"),s[5]===void 0&&Tt(()=>s[19].call(o)),w(t,"class","filter-item svelte-wl73y9"),k.__value="CA",N(k,k.__value),F.__value="US",N(F,F.__value),j.__value="MX",N(j,j.__value),W.__value="JP",N(W,W.__value),se.__value="FR",N(se,se.__value),K.__value="GB",N(K,K.__value),O.__value="DE",N(O,O.__value),Z.__value="IT",N(Z,Z.__value),x.__value="ES",N(x,x.__value),X.__value="CH",N(X,X.__value),be.__value="NL",N(be,be.__value),ge.__value="AU",N(ge,ge.__value),E.required=!0,w(E,"name","country"),w(E,"class","svelte-wl73y9"),s[2]===void 0&&Tt(()=>s[20].call(E)),w(f,"class","filter-item svelte-wl73y9"),xe.required=!0,w(xe,"name","startDate"),w(xe,"min",s[7]),w(xe,"type","date"),w(xe,"class","svelte-wl73y9"),w(_e,"class","filter-item svelte-wl73y9"),Me.required=!0,w(Me,"name","endDate"),w(Me,"min",s[0]),w(Me,"type","date"),w(Me,"class","svelte-wl73y9"),w(oe,"class","filter-item svelte-wl73y9"),we.required=!0,w(we,"name","attendees"),w(we,"type","number"),w(we,"min","0"),w(we,"class","svelte-wl73y9"),w(z,"class","filter-item svelte-wl73y9"),Fe.disabled=s[9],w(Fe,"class","svelte-wl73y9"),w(e,"class","svelte-wl73y9")},m(ze,H){Ie(ze,e,H),v(e,t),v(t,n),v(t,r),v(t,o),v(o,l),v(o,u),v(o,h),nn(o,s[5],!0),v(e,p),v(e,f),v(f,m),v(f,T),v(f,E),v(E,k),v(E,F),v(E,j),v(E,W),v(E,se),v(E,K),v(E,O),v(E,Z),v(E,x),v(E,X),v(E,be),v(E,ge),nn(E,s[2],!0),v(e,Xe),Se&&Se.m(e,null),v(e,Ee),v(e,_e),v(_e,J),v(_e,Oe),v(_e,xe),N(xe,s[0]),v(e,ie),v(e,oe),v(oe,te),v(oe,qe),v(oe,Me),N(Me,s[1]),v(e,Ne),v(e,z),v(z,U),v(z,ke),v(z,we),N(we,s[3]),v(e,Te),v(e,Fe),v(Fe,Ue),v(e,Yt),he&&he.m(e,null),v(e,Ge),Pe&&Pe.m(e,null),v(e,Pt),pe&&pe.m(e,null),v(e,He),Re&&Re.m(e,null),v(e,Rt),me&&me.m(e,null),De=!0,Wt||(st=[Be(o,"change",s[19]),Be(E,"change",s[20]),Be(xe,"input",s[22]),Be(Me,"input",s[23]),Be(we,"input",s[24]),Be(Fe,"click",s[25])],Wt=!0)},p(ze,H){s=ze,H[0]&32&&nn(o,s[5]),H[0]&4&&nn(E,s[2]),s[2]==="US"?Se?Se.p(s,H):(Se=xi(s),Se.c(),Se.m(e,Ee)):Se&&(Se.d(1),Se=null),(!De||H[0]&128)&&w(xe,"min",s[7]),H[0]&1&&N(xe,s[0]),(!De||H[0]&1)&&w(Me,"min",s[0]),H[0]&2&&N(Me,s[1]),H[0]&8&&Bi(we.value)!==s[3]&&N(we,s[3]),(!De||H[0]&512)&&(Fe.disabled=s[9]),s[9]?he?he.p(s,H):(he=ki(s),he.c(),he.m(e,Ge)):he&&(he.d(1),he=null),s[10]?Pe||(Pe=Ai(),Pe.c(),Pe.m(e,Pt)):Pe&&(Pe.d(1),Pe=null),s[11]?pe||(pe=Ii(),pe.c(),pe.m(e,He)):pe&&(pe.d(1),pe=null),s[8]?Re||(Re=Si(),Re.c(),Re.m(e,Rt)):Re&&(Re.d(1),Re=null),s[12]?me||(me=Ni(),me.c(),me.m(e,null)):me&&(me.d(1),me=null)},i(ze){De||(ze&&Tt(()=>{De&&(Et&&Et.end(1),Je=qn(e,ut,{delay:450,duration:350,axis:"x",easing:jr}),Je.start())}),De=!0)},o(ze){Je&&Je.invalidate(),ze&&(Et=Vn(e,ut,{duration:350,axis:"x"})),De=!1},d(ze){ze&&P(e),Se&&Se.d(),he&&he.d(),Pe&&Pe.d(),pe&&pe.d(),Re&&Re.d(),me&&me.d(),ze&&Et&&Et.end(),Wt=!1,xs(st)}}}function Sl(s,e,t){let n=new Date;n.setDate(n.getDate()-14),n=n.toISOString().split("T")[0];let{startDate:i=new Date().toISOString().split("T")[0]}=e,{data:r}=e,{tournaments:o}=e,l=o.map(({venue_address:x})=>x),{endDate:a}=e,{country:u}=e,{minAttendees:c=0}=e,{state:h}=e,{game:d}=e,{geolocated:p}=e,{mapResult:f}=e,{showShareDialog:m=!1}=e,b=!1,T=!1,E=!1,k=!1,I=!1,F=!1,{delay:Y}=e,j;const S=new It({apiKey:r.GOOGLE_MAPS_API_KEY,version:"weekly"});$i(async()=>{S.load().then(async()=>{j=new google.maps.Geocoder})});async function W(x){if(l.includes(x.venueAddress)){let B=o.find(({venue_address:X})=>X===x.venueAddress);return console.log("Found tournament in list"),{lat:B.lat,lng:B.lng}}else try{console.log("Geocoding address");let X=(await j.geocode({address:x.venueAddress})).results[0].geometry.location;const{error:D}=await Ci.from("tournaments").insert({name:x.name,lat:X.lat(),lng:X.lng(),start_at:x.startAt,primary_contact:x.primaryContact,url:x.url,num_attendees:x.numAttendees,state:x.state,venue_address:x.venueAddress});return D&&console.log("Error inserting into database:",D),{lat:X.lat(),lng:X.lng()}}catch(B){console.log("Error geocoding address:",B);return}}async function $(){if(i>a){alert("Start date must be before end date");return}if(a===void 0){alert("Please enter an end date");return}try{t(8,T=!1),t(10,k=!1),t(9,E=!0),t(11,I=!1),t(12,F=!1),b=!1;let x,B=new Date(i.replace(/-/g,"/").replace("T"," ")),X=new Date(a.replace(/-/g,"/").replace("T"," "));X.setHours(23,59,59),B=Math.floor(B.getTime()/1e3),X=Math.floor(X.getTime()/1e3);let D=d.split(" ");const ae="https://api.start.gg/gql/"+"alpha",ge=new Do(ae,{headers:{Authorization:"Bearer "+r.SMASH_GG_API_KEY}});let Ce=`
            query TournamentsByCountry($cCode: String!, $perPage: Int!, $after: Timestamp!, $before: Timestamp, $state: String
            $game: [ID]) {
              tournaments(query: {
                perPage: $perPage
                filter: {
                  countryCode: $cCode
                  afterDate: $after
                  beforeDate: $before
                  videogameIds: $game
                  addrState: $state
                }
              }) {
                nodes {
                  name
                  venueAddress
                  startAt
                  primaryContact
                  url
                  numAttendees
                  state
                }
              }
            }`;const Xe={cCode:u,perPage:151,after:B,before:X,state:h,game:D};(h==="all"||u!=="US")&&(delete Xe.state,Ce=Ce.replace(/addrState: \$state,?/,"").replace(", $state: String",""));let Ee=await ge.request(Ce,Xe),_e=[];x=Ee.tournaments.nodes;for(let J of Ee.tournaments.nodes){const fe=J.startAt,Oe=new Date(fe*1e3);J.startAt=Oe.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}if(x=x.filter(function(J){return c<=J.numAttendees}),x.length===0){t(9,E=!1),t(11,I=!0);return}if(x.length>150){t(9,E=!1),t(8,T=!0);return}c!==0?x=x.filter(J=>J.numAttendees!==null&&J.numAttendees!==void 0):x=x.map(J=>((J.numAttendees===null||J.numAttendees===void 0)&&(J.numAttendees="unknown"),J));for(let J of x){let fe;if(F){t(9,E=!1);return}try{fe=await W(J)}catch(xe){console.log(xe);continue}let Oe="https://start.gg"+J.url;fe!==void 0&&_e.push({name:J.name,lat:fe.lat,lng:fe.lng,primaryContact:J.primaryContact,venueAddress:J.venueAddress,url:Oe,startAt:J.startAt,numAttendees:J.numAttendees,state:J.state})}await Ci.from("tournaments").select().then(J=>{t(13,o=J.data),l=J.data.map(({venue_address:fe})=>fe)}).catch(J=>{console.log(J)}),t(14,f=_e),console.log(f)}catch(x){t(10,k=!0),t(9,E=!1),console.error("Error:",x)}t(9,E=!1)}function se(){d=ts(this),t(5,d)}function ue(){u=ts(this),t(2,u)}function K(){h=ts(this),t(4,h)}function _(){i=this.value,t(0,i)}function O(){a=this.value,t(1,a)}function R(){c=Bi(this.value),t(3,c)}const Z=async()=>await $(),V=()=>t(12,F=!0);return s.$$set=x=>{"startDate"in x&&t(0,i=x.startDate),"data"in x&&t(15,r=x.data),"tournaments"in x&&t(13,o=x.tournaments),"endDate"in x&&t(1,a=x.endDate),"country"in x&&t(2,u=x.country),"minAttendees"in x&&t(3,c=x.minAttendees),"state"in x&&t(4,h=x.state),"game"in x&&t(5,d=x.game),"geolocated"in x&&t(16,p=x.geolocated),"mapResult"in x&&t(14,f=x.mapResult),"showShareDialog"in x&&t(17,m=x.showShareDialog),"delay"in x&&t(18,Y=x.delay)},[i,a,u,c,h,d,$,n,T,E,k,I,F,o,f,r,p,m,Y,se,ue,K,_,O,R,Z,V]}class Nl extends Cn{constructor(e){super(),xn(this,e,Sl,Il,On,{startDate:0,data:15,tournaments:13,endDate:1,country:2,minAttendees:3,state:4,game:5,geolocated:16,mapResult:14,showShareDialog:17,delay:18,updateMap:6},null,[-1,-1])}get updateMap(){return this.$$.ctx[6]}}function Di(s){let e,t=`To use, click the filter icon on the sidebar to the left. <br/><br/>

            Select a start and end date, and any other filters
            and click &quot;search&quot;. All the tournaments will be shown on the map. <br/><br/>

            Clicking on a marker will show all the tournament information. Additonally, clicking on the tournmanet
            icon on the sidebar will show you a list view of the tournaments. You can click on the tournament to pan
            the camera to that tournament.<br/><br/>


            Found a bug? <a style="cursor: pointer" href="/contact">Contact</a> me`,n,i;return{c(){e=g("p"),e.innerHTML=t,this.h()},l(r){e=y(r,"P",{class:!0,["data-svelte-h"]:!0}),A(e)!=="svelte-lb15dl"&&(e.innerHTML=t),this.h()},h(){w(e,"class","content svelte-vz1jks")},m(r,o){Ie(r,e,o),i=!0},i(r){i||(r&&Tt(()=>{i&&(n||(n=$n(e,ut,{y:200,duration:500},!0)),n.run(1))}),i=!0)},o(r){r&&(n||(n=$n(e,ut,{y:200,duration:500},!1)),n.run(0)),i=!1},d(r){r&&P(e),r&&n&&n.end()}}}function Pi(s){let e,t=`<p class="svelte-vz1jks">In Smash Mapping, marker colours mean different things.</p> <p class="svelte-vz1jks">The markers and their meanings are:</p> <div class="marker svelte-vz1jks"><img src="markers/red-marker.png" alt="red-pointer" class="svelte-vz1jks"/> Below 50
                attendees</div> <div class="marker svelte-vz1jks"><img src="markers/green-marker.png" alt="green-pointer" class="svelte-vz1jks"/> Between 51
                and
                100 attendees</div> <div class="marker svelte-vz1jks"><img src="markers/blue-marker.png" alt="blue-pointer" class="svelte-vz1jks"/> Between 101
                and
                500 attendees</div> <div class="marker svelte-vz1jks"><img src="markers/purple-marker.png" alt="purple-pointer" class="svelte-vz1jks"/> Over 500
                attendees</div> <div class="marker svelte-vz1jks"><img src="markers/yellow-marker.png" alt="yellow-pointer" class="svelte-vz1jks"/>
                 Another marker is on top of this one</div> <div class="marker svelte-vz1jks"><img src="markers/grey-marker.png" alt="grey-pointer" class="svelte-vz1jks"/> Tournament has ended</div>`,n,i;return{c(){e=g("aside"),e.innerHTML=t,this.h()},l(r){e=y(r,"ASIDE",{class:!0,["data-svelte-h"]:!0}),A(e)!=="svelte-jwdctp"&&(e.innerHTML=t),this.h()},h(){w(e,"class","content svelte-vz1jks")},m(r,o){Ie(r,e,o),i=!0},i(r){i||(r&&Tt(()=>{i&&(n||(n=$n(e,ut,{y:200,duration:500},!0)),n.run(1))}),i=!0)},o(r){r&&(n||(n=$n(e,ut,{y:200,duration:500},!1)),n.run(0)),i=!1},d(r){r&&P(e),r&&n&&n.end()}}}function Dl(s){let e,t,n,i,r,o,l,a,u,c,h,d,p,f,m,b=s[0]&&Di(),T=s[1]&&Pi();return{c(){e=g("div"),t=g("div"),n=g("div"),i=St(`
        Guide`),r=Q(),b&&b.c(),o=Q(),l=g("div"),a=g("div"),u=St(`
        Legend`),c=Q(),T&&T.c(),this.h()},l(E){e=y(E,"DIV",{class:!0});var k=ce(e);t=y(k,"DIV",{class:!0});var I=ce(t);n=y(I,"DIV",{class:!0}),ce(n).forEach(P),i=Nt(I,`
        Guide`),I.forEach(P),r=ee(k),b&&b.l(k),o=ee(k),l=y(k,"DIV",{class:!0});var F=ce(l);a=y(F,"DIV",{class:!0}),ce(a).forEach(P),u=Nt(F,`
        Legend`),F.forEach(P),c=ee(k),T&&T.l(k),k.forEach(P),this.h()},h(){w(n,"class","arrow-right svelte-vz1jks"),Ze(n,"guideOpen",s[0]),w(t,"class","title svelte-vz1jks"),w(a,"class","arrow-right svelte-vz1jks"),Ze(a,"legendOpen",s[1]),w(l,"class","title svelte-vz1jks"),w(e,"class","svelte-vz1jks")},m(E,k){Ie(E,e,k),v(e,t),v(t,n),v(t,i),v(e,r),b&&b.m(e,null),v(e,o),v(e,l),v(l,a),v(l,u),v(e,c),T&&T.m(e,null),p=!0,f||(m=[Be(t,"click",s[3]),Be(l,"click",s[4])],f=!0)},p(E,[k]){(!p||k&1)&&Ze(n,"guideOpen",E[0]),E[0]?b?k&1&&ve(b,1):(b=Di(),b.c(),ve(b,1),b.m(e,o)):b&&(Gt(),je(b,1,1,()=>{b=null}),Ht()),(!p||k&2)&&Ze(a,"legendOpen",E[1]),E[1]?T?k&2&&ve(T,1):(T=Pi(),T.c(),ve(T,1),T.m(e,null)):T&&(Gt(),je(T,1,1,()=>{T=null}),Ht())},i(E){p||(ve(b),ve(T),E&&Tt(()=>{p&&(d&&d.end(1),h=qn(e,ni,{y:150,duration:400,delay:400}),h.start())}),p=!0)},o(E){je(b),je(T),h&&h.invalidate(),E&&(d=Vn(e,ni,{y:100,duration:400})),p=!1},d(E){E&&P(e),b&&b.d(),T&&T.d(),E&&d&&d.end(),f=!1,xs(m)}}}function Pl(s,e,t){let n=!1,i=!1,{delay:r}=e;const o=()=>t(0,n=!n),l=()=>t(1,i=!i);return s.$$set=a=>{"delay"in a&&t(2,r=a.delay)},[n,i,r,o,l]}class Rl extends Cn{constructor(e){super(),xn(this,e,Pl,Dl,On,{delay:2})}}function Ri(s,e,t){const n=s.slice();return n[7]=e[t],n}function ji(s){let e,t,n,i,r,o,l,a,u,c=Ys(s[0].filter(s[5])),h=[];for(let p=0;p<c.length;p+=1)h[p]=Li(Ri(s,c,p));const d=p=>je(h[p],1,1,()=>{h[p]=null});return{c(){e=g("div"),t=g("input"),r=Q();for(let p=0;p<h.length;p+=1)h[p].c();o=Bn(),this.h()},l(p){e=y(p,"DIV",{class:!0});var f=ce(e);t=y(f,"INPUT",{type:!0,placeholder:!0}),f.forEach(P),r=ee(p);for(let m=0;m<h.length;m+=1)h[m].l(p);o=Bn(),this.h()},h(){w(t,"type","text"),w(t,"placeholder","Search tournament"),w(e,"class","search svelte-j6mz0c")},m(p,f){Ie(p,e,f),v(e,t),N(t,s[1]),Ie(p,r,f);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(p,f);Ie(p,o,f),l=!0,a||(u=Be(t,"input",s[4]),a=!0)},p(p,f){if(f&2&&t.value!==p[1]&&N(t,p[1]),f&7){c=Ys(p[0].filter(p[5]));let m;for(m=0;m<c.length;m+=1){const b=Ri(p,c,m);h[m]?(h[m].p(b,f),ve(h[m],1)):(h[m]=Li(b),h[m].c(),ve(h[m],1),h[m].m(o.parentNode,o))}for(Gt(),m=c.length;m<h.length;m+=1)d(m);Ht()}},i(p){if(!l){p&&Tt(()=>{l&&(i&&i.end(1),n=qn(e,ut,{y:200,duration:700}),n.start())});for(let f=0;f<c.length;f+=1)ve(h[f]);l=!0}},o(p){n&&n.invalidate(),p&&(i=Vn(e,ut,{y:200,duration:500})),h=h.filter(Boolean);for(let f=0;f<h.length;f+=1)je(h[f]);l=!1},d(p){p&&(P(e),P(r),P(o)),p&&i&&i.end(),dr(h,p),a=!1,u()}}}function Li(s){let e,t,n=s[7].name+"",i,r,o,l,a,u,c,h=s[7].venueAddress+"",d,p,f,m,b,T,E,k=s[7].numAttendees+"",I,F,Y,j,S,W,$=s[7].startAt+"",se,ue,K,_,O,R,Z;function V(){return s[6](s[7])}return{c(){e=g("div"),t=g("a"),i=St(n),o=Q(),l=g("p"),a=g("img"),c=Q(),d=St(h),p=Q(),f=g("div"),m=g("p"),b=g("img"),E=Q(),I=St(k),F=Q(),Y=g("p"),j=g("img"),W=Q(),se=St($),ue=Q(),this.h()},l(x){e=y(x,"DIV",{class:!0});var B=ce(e);t=y(B,"A",{href:!0,target:!0,class:!0});var X=ce(t);i=Nt(X,n),X.forEach(P),o=ee(B),l=y(B,"P",{class:!0});var D=ce(l);a=y(D,"IMG",{width:!0,height:!0,src:!0,alt:!0,class:!0}),c=ee(D),d=Nt(D,h),D.forEach(P),p=ee(B),f=y(B,"DIV",{class:!0});var be=ce(f);m=y(be,"P",{class:!0});var ae=ce(m);b=y(ae,"IMG",{width:!0,height:!0,src:!0,alt:!0,class:!0}),E=ee(ae),I=Nt(ae,k),ae.forEach(P),F=ee(be),Y=y(be,"P",{class:!0});var ge=ce(Y);j=y(ge,"IMG",{width:!0,height:!0,src:!0,alt:!0,class:!0}),W=ee(ge),se=Nt(ge,$),ge.forEach(P),be.forEach(P),ue=ee(B),B.forEach(P),this.h()},h(){w(t,"href",r=s[7].url),w(t,"target","_blank"),w(t,"class","svelte-j6mz0c"),w(a,"width","30px"),w(a,"height","30px"),es(a.src,u="tournament-card-icons/map-marker.png")||w(a,"src",u),w(a,"alt","map-marker"),w(a,"class","svelte-j6mz0c"),w(l,"class","address svelte-j6mz0c"),w(b,"width","30px"),w(b,"height","30px"),es(b.src,T="tournament-card-icons/people.png")||w(b,"src",T),w(b,"alt","people"),w(b,"class","svelte-j6mz0c"),w(m,"class","attendees svelte-j6mz0c"),w(j,"width","30px"),w(j,"height","30px"),es(j.src,S="tournament-card-icons/clock.png")||w(j,"src",S),w(j,"alt","clock"),w(j,"class","svelte-j6mz0c"),w(Y,"class","clock svelte-j6mz0c"),w(f,"class","attendees-clock svelte-j6mz0c"),w(e,"class","tournament svelte-j6mz0c")},m(x,B){Ie(x,e,B),v(e,t),v(t,i),v(e,o),v(e,l),v(l,a),v(l,c),v(l,d),v(e,p),v(e,f),v(f,m),v(m,b),v(m,E),v(m,I),v(f,F),v(f,Y),v(Y,j),v(Y,W),v(Y,se),v(e,ue),O=!0,R||(Z=Be(e,"click",V),R=!0)},p(x,B){s=x,(!O||B&3)&&n!==(n=s[7].name+"")&&fn(i,n),(!O||B&3&&r!==(r=s[7].url))&&w(t,"href",r),(!O||B&3)&&h!==(h=s[7].venueAddress+"")&&fn(d,h),(!O||B&3)&&k!==(k=s[7].numAttendees+"")&&fn(I,k),(!O||B&3)&&$!==($=s[7].startAt+"")&&fn(se,$)},i(x){O||(x&&Tt(()=>{O&&(_&&_.end(1),K=qn(e,ut,{y:200,duration:700}),K.start())}),O=!0)},o(x){K&&K.invalidate(),x&&(_=Vn(e,ut,{y:200,duration:500})),O=!1},d(x){x&&P(e),x&&_&&_.end(),R=!1,Z()}}}function jl(s){let e,t,n=s[0]!==void 0&&ji(s);return{c(){n&&n.c(),e=Bn()},l(i){n&&n.l(i),e=Bn()},m(i,r){n&&n.m(i,r),Ie(i,e,r),t=!0},p(i,[r]){i[0]!==void 0?n?(n.p(i,r),r&1&&ve(n,1)):(n=ji(i),n.c(),ve(n,1),n.m(e.parentNode,e)):n&&(Gt(),je(n,1,1,()=>{n=null}),Ht())},i(i){t||(ve(n),t=!0)},o(i){je(n),t=!1},d(i){i&&P(e),n&&n.d(i)}}}function Ll(s,e,t){let{mapResult:n}=e,{map:i}=e,r="";function o(c,h){i.panTo({lat:c,lng:h}),i.setZoom(10)}function l(){r=this.value,t(1,r)}const a=c=>c.name.toLowerCase().includes(r.trimStart().toLowerCase())||c.venueAddress.toLowerCase().includes(r.trimStart().toLowerCase()),u=c=>o(c.lat,c.lng);return s.$$set=c=>{"mapResult"in c&&t(0,n=c.mapResult),"map"in c&&t(3,i=c.map)},[n,r,o,i,l,a,u]}class Ml extends Cn{constructor(e){super(),xn(this,e,Ll,jl,On,{mapResult:0,map:3})}}function Mi(s){let e,t;return e=new Ml({props:{mapResult:s[1],map:s[15]}}),{c(){zn(e.$$.fragment)},l(n){Gn(e.$$.fragment,n)},m(n,i){Hn(e,n,i),t=!0},p(n,i){const r={};i[0]&2&&(r.mapResult=n[1]),i[0]&32768&&(r.map=n[15]),e.$set(r)},i(n){t||(ve(e.$$.fragment,n),t=!0)},o(n){je(e.$$.fragment,n),t=!1},d(n){Jn(e,n)}}}function Fi(s){let e,t,n,i,r,o,l,a,u,c,h,d;function p(S){s[22](S)}function f(S){s[23](S)}function m(S){s[24](S)}function b(S){s[25](S)}function T(S){s[26](S)}function E(S){s[27](S)}function k(S){s[28](S)}function I(S){s[29](S)}function F(S){s[30](S)}function Y(S){s[31](S)}let j={delay:s[14]};return s[6]!==void 0&&(j.state=s[6]),s[16]!==void 0&&(j.tournaments=s[16]),s[0]!==void 0&&(j.data=s[0]),s[8]!==void 0&&(j.geolocated=s[8]),s[1]!==void 0&&(j.mapResult=s[1]),s[2]!==void 0&&(j.startDate=s[2]),s[3]!==void 0&&(j.endDate=s[3]),s[4]!==void 0&&(j.country=s[4]),s[5]!==void 0&&(j.minAttendees=s[5]),s[7]!==void 0&&(j.showShareDialog=s[7]),e=new Nl({props:j}),et.push(()=>nt(e,"state",p)),et.push(()=>nt(e,"tournaments",f)),et.push(()=>nt(e,"data",m)),et.push(()=>nt(e,"geolocated",b)),et.push(()=>nt(e,"mapResult",T)),et.push(()=>nt(e,"startDate",E)),et.push(()=>nt(e,"endDate",k)),et.push(()=>nt(e,"country",I)),et.push(()=>nt(e,"minAttendees",F)),et.push(()=>nt(e,"showShareDialog",Y)),{c(){zn(e.$$.fragment)},l(S){Gn(e.$$.fragment,S)},m(S,W){Hn(e,S,W),d=!0},p(S,W){const $={};W[0]&16384&&($.delay=S[14]),!t&&W[0]&64&&(t=!0,$.state=S[6],tt(()=>t=!1)),!n&&W[0]&65536&&(n=!0,$.tournaments=S[16],tt(()=>n=!1)),!i&&W[0]&1&&(i=!0,$.data=S[0],tt(()=>i=!1)),!r&&W[0]&256&&(r=!0,$.geolocated=S[8],tt(()=>r=!1)),!o&&W[0]&2&&(o=!0,$.mapResult=S[1],tt(()=>o=!1)),!l&&W[0]&4&&(l=!0,$.startDate=S[2],tt(()=>l=!1)),!a&&W[0]&8&&(a=!0,$.endDate=S[3],tt(()=>a=!1)),!u&&W[0]&16&&(u=!0,$.country=S[4],tt(()=>u=!1)),!c&&W[0]&32&&(c=!0,$.minAttendees=S[5],tt(()=>c=!1)),!h&&W[0]&128&&(h=!0,$.showShareDialog=S[7],tt(()=>h=!1)),e.$set($)},i(S){d||(ve(e.$$.fragment,S),d=!0)},o(S){je(e.$$.fragment,S),d=!1},d(S){Jn(e,S)}}}function Ui(s){let e,t;return e=new Rl({props:{delay:s[14]}}),{c(){zn(e.$$.fragment)},l(n){Gn(e.$$.fragment,n)},m(n,i){Hn(e,n,i),t=!0},p(n,i){const r={};i[0]&16384&&(r.delay=n[14]),e.$set(r)},i(n){t||(ve(e.$$.fragment,n),t=!0)},o(n){je(e.$$.fragment,n),t=!1},d(n){Jn(e,n)}}}function Fl(s){let e,t,n,i,r,o,l,a,u,c,h,d,p,f,m,b,T,E,k,I,F='<img src="filter.png" style="width: 40px; height: 45px" alt="filter-image" class="svelte-h2ooe8"/>',Y,j,S='<img src="tournaments.png" style="width: 40px; height: 45px" alt="tournaments-image" class="svelte-h2ooe8"/>',W,$,se='<img src="questionmark.png" style="width: 40px; height: 40px" alt="tournaments-image" class="svelte-h2ooe8"/>',ue,K,_,O,R,Z,V,x=">",B,X,D,be,ae,ge,Ce,Xe,Ee,_e,J='<p style="text-align: center; color: white" class="svelte-h2ooe8">Created by: <a href="https://twitter.com/ZedenZeder" class="svelte-h2ooe8">Sleepy</a></p>',fe,Oe,xe,ie=s[11]&&Mi(s),oe=s[10]&&Fi(s),te=s[12]&&Ui(s);function Dt(z){s[32](z)}function qe(z){s[33](z)}function Me(z){s[34](z)}let Ne={};return s[15]!==void 0&&(Ne.map=s[15]),s[0]!==void 0&&(Ne.data=s[0]),s[1]!==void 0&&(Ne.mapResult=s[1]),ae=new Rr({props:Ne}),et.push(()=>nt(ae,"map",Dt)),et.push(()=>nt(ae,"data",qe)),et.push(()=>nt(ae,"mapResult",Me)),{c(){e=g("meta"),t=g("meta"),n=g("meta"),i=g("meta"),r=g("meta"),o=g("meta"),l=g("meta"),a=g("meta"),u=g("meta"),c=g("meta"),h=g("meta"),d=g("meta"),p=g("meta"),f=g("meta"),m=g("meta"),b=Q(),T=g("body"),E=g("div"),k=g("div"),I=g("button"),I.innerHTML=F,Y=Q(),j=g("button"),j.innerHTML=S,W=Q(),$=g("button"),$.innerHTML=se,ue=Q(),K=g("div"),_=g("div"),O=g("p"),R=St(s[13]),Z=Q(),V=g("button"),V.textContent=x,B=Q(),ie&&ie.c(),X=Q(),oe&&oe.c(),D=Q(),te&&te.c(),be=Q(),zn(ae.$$.fragment),Ee=Q(),_e=g("footer"),_e.innerHTML=J,this.h()},l(z){const U=fr("svelte-1ot263w",document.head);e=y(U,"META",{charset:!0,class:!0}),t=y(U,"META",{name:!0,content:!0,class:!0}),n=y(U,"META",{property:!0,content:!0,class:!0}),i=y(U,"META",{property:!0,content:!0,class:!0}),r=y(U,"META",{name:!0,content:!0,class:!0}),o=y(U,"META",{name:!0,content:!0,class:!0}),l=y(U,"META",{property:!0,content:!0,class:!0}),a=y(U,"META",{property:!0,content:!0,class:!0}),u=y(U,"META",{name:!0,content:!0,class:!0}),c=y(U,"META",{name:!0,content:!0,class:!0}),h=y(U,"META",{property:!0,content:!0,class:!0}),d=y(U,"META",{name:!0,content:!0,class:!0}),p=y(U,"META",{property:!0,content:!0,class:!0}),f=y(U,"META",{property:!0,content:!0,class:!0}),m=y(U,"META",{name:!0,content:!0,class:!0}),U.forEach(P),b=ee(z),T=y(z,"BODY",{class:!0});var Ve=ce(T);E=y(Ve,"DIV",{class:!0});var ke=ce(E);k=y(ke,"DIV",{class:!0});var we=ce(k);I=y(we,"BUTTON",{class:!0,["data-svelte-h"]:!0}),A(I)!=="svelte-1u3q969"&&(I.innerHTML=F),Y=ee(we),j=y(we,"BUTTON",{class:!0,["data-svelte-h"]:!0}),A(j)!=="svelte-qm2lj5"&&(j.innerHTML=S),W=ee(we),$=y(we,"BUTTON",{class:!0,["data-svelte-h"]:!0}),A($)!=="svelte-u35wff"&&($.innerHTML=se),we.forEach(P),ue=ee(ke),K=y(ke,"DIV",{class:!0,id:!0});var Te=ce(K);_=y(Te,"DIV",{class:!0});var Fe=ce(_);O=y(Fe,"P",{style:!0,class:!0});var Ue=ce(O);R=Nt(Ue,s[13]),Ue.forEach(P),Z=ee(Fe),V=y(Fe,"BUTTON",{class:!0,style:!0,["data-svelte-h"]:!0}),A(V)!=="svelte-i510f5"&&(V.textContent=x),Fe.forEach(P),B=ee(Te),ie&&ie.l(Te),X=ee(Te),oe&&oe.l(Te),D=ee(Te),te&&te.l(Te),Te.forEach(P),be=ee(ke),Gn(ae.$$.fragment,ke),ke.forEach(P),Ee=ee(Ve),_e=y(Ve,"FOOTER",{style:!0,class:!0,["data-svelte-h"]:!0}),A(_e)!=="svelte-4nnp89"&&(_e.innerHTML=J),Ve.forEach(P),this.h()},h(){document.title="Smash Mapping: Map",w(e,"charset","utf-8"),w(e,"class","svelte-h2ooe8"),w(t,"name","viewport"),w(t,"content","width=device-width,initial-scale=1"),w(t,"class","svelte-h2ooe8"),w(n,"property","og:locale"),w(n,"content","en_US"),w(n,"class","svelte-h2ooe8"),w(i,"property","og:type"),w(i,"content","website"),w(i,"class","svelte-h2ooe8"),w(r,"name","twitter:card"),w(r,"content","summary_large_image"),w(r,"class","svelte-h2ooe8"),w(o,"name","twitter:site"),w(o,"content","@ZedenZeder"),w(o,"class","svelte-h2ooe8"),w(l,"property","og:site_name"),w(l,"content","Smash Mapping - A New Way to Find Tournaments"),w(l,"class","svelte-h2ooe8"),w(a,"property","og:title"),w(a,"content","Smash Mapping - A New Way to Find Tournaments"),w(a,"class","svelte-h2ooe8"),w(u,"name","twitter:title"),w(u,"content","Smash Mapping - A New Way to Find Tournaments"),w(u,"class","svelte-h2ooe8"),w(c,"name","description"),w(c,"content","Showing where in-person e-sports are held."),w(c,"class","svelte-h2ooe8"),w(h,"property","og:description"),w(h,"content","Showing where in-person e-sports are held."),w(h,"class","svelte-h2ooe8"),w(d,"name","twitter:description"),w(d,"content","Showing where in-person e-sports are held."),w(d,"class","svelte-h2ooe8"),w(p,"property","og:url"),w(p,"content","https://www.smash-mapping.com/"),w(p,"class","svelte-h2ooe8"),w(f,"property","og:image"),w(f,"content","example.png"),w(f,"class","svelte-h2ooe8"),w(m,"name","twitter:image"),w(m,"content","example.png"),w(m,"class","svelte-h2ooe8"),w(I,"class","svelte-h2ooe8"),Ze(I,"sidebarSelected",s[10]),w(j,"class","svelte-h2ooe8"),Ze(j,"sidebarSelected",s[11]),w($,"class","svelte-h2ooe8"),Ze($,"sidebarSelected",s[12]),w(k,"class","sidebar-buttons svelte-h2ooe8"),tn(O,"margin-left","auto"),w(O,"class","svelte-h2ooe8"),w(V,"class","tournaments-sidebar-close-button svelte-h2ooe8"),tn(V,"cursor","pointer"),Ze(V,"sidebarClosed",s[9]),w(_,"class","tournaments-title svelte-h2ooe8"),w(K,"class","sidebar svelte-h2ooe8"),w(K,"id","tournaments-sidebar"),Ze(K,"sidebarClosed",s[9]),w(E,"class","map svelte-h2ooe8"),tn(_e,"height","30px"),tn(_e,"display","block"),w(_e,"class","svelte-h2ooe8"),w(T,"class","svelte-h2ooe8")},m(z,U){v(document.head,e),v(document.head,t),v(document.head,n),v(document.head,i),v(document.head,r),v(document.head,o),v(document.head,l),v(document.head,a),v(document.head,u),v(document.head,c),v(document.head,h),v(document.head,d),v(document.head,p),v(document.head,f),v(document.head,m),Ie(z,b,U),Ie(z,T,U),v(T,E),v(E,k),v(k,I),v(k,Y),v(k,j),v(k,W),v(k,$),v(E,ue),v(E,K),v(K,_),v(_,O),v(O,R),v(_,Z),v(_,V),v(K,B),ie&&ie.m(K,null),v(K,X),oe&&oe.m(K,null),v(K,D),te&&te.m(K,null),v(E,be),Hn(ae,E,null),v(T,Ee),v(T,_e),fe=!0,Oe||(xe=[Be(I,"click",s[18]),Be(j,"click",s[19]),Be($,"click",s[20]),Be(V,"click",s[21])],Oe=!0)},p(z,U){(!fe||U[0]&1024)&&Ze(I,"sidebarSelected",z[10]),(!fe||U[0]&2048)&&Ze(j,"sidebarSelected",z[11]),(!fe||U[0]&4096)&&Ze($,"sidebarSelected",z[12]),(!fe||U[0]&8192)&&fn(R,z[13]),(!fe||U[0]&512)&&Ze(V,"sidebarClosed",z[9]),z[11]?ie?(ie.p(z,U),U[0]&2048&&ve(ie,1)):(ie=Mi(z),ie.c(),ve(ie,1),ie.m(K,X)):ie&&(Gt(),je(ie,1,1,()=>{ie=null}),Ht()),z[10]?oe?(oe.p(z,U),U[0]&1024&&ve(oe,1)):(oe=Fi(z),oe.c(),ve(oe,1),oe.m(K,D)):oe&&(Gt(),je(oe,1,1,()=>{oe=null}),Ht()),z[12]?te?(te.p(z,U),U[0]&4096&&ve(te,1)):(te=Ui(z),te.c(),ve(te,1),te.m(K,null)):te&&(Gt(),je(te,1,1,()=>{te=null}),Ht()),(!fe||U[0]&512)&&Ze(K,"sidebarClosed",z[9]);const Ve={};!ge&&U[0]&32768&&(ge=!0,Ve.map=z[15],tt(()=>ge=!1)),!Ce&&U[0]&1&&(Ce=!0,Ve.data=z[0],tt(()=>Ce=!1)),!Xe&&U[0]&2&&(Xe=!0,Ve.mapResult=z[1],tt(()=>Xe=!1)),ae.$set(Ve)},i(z){fe||(ve(ie),ve(oe),ve(te),ve(ae.$$.fragment,z),fe=!0)},o(z){je(ie),je(oe),je(te),je(ae.$$.fragment,z),fe=!1},d(z){z&&(P(b),P(T)),P(e),P(t),P(n),P(i),P(r),P(o),P(l),P(a),P(u),P(c),P(h),P(d),P(p),P(f),P(m),ie&&ie.d(),oe&&oe.d(),te&&te.d(),Jn(ae),Oe=!1,xs(xe)}}}function Ul(s,e,t){let{data:n}=e,i,r,o,l,a=0,u,c,h=n.geolocated,d=!1,p=!0,f=!1,m=!1,b="Filters:",T,E,{tournaments:k}=n;function I(D){t(9,d=!1),t(10,p=D==="Filters:"),t(11,f=D==="Tournaments:"),t(12,m=D==="Help:"),t(13,b=D),(p||f||m)&&t(14,T=0)}const F=()=>I("Filters:"),Y=()=>I("Tournaments:"),j=()=>I("Help:"),S=()=>t(9,d=!d);function W(D){u=D,t(6,u)}function $(D){k=D,t(16,k)}function se(D){n=D,t(0,n)}function ue(D){h=D,t(8,h)}function K(D){i=D,t(1,i)}function _(D){r=D,t(2,r)}function O(D){o=D,t(3,o)}function R(D){l=D,t(4,l)}function Z(D){a=D,t(5,a)}function V(D){c=D,t(7,c)}function x(D){E=D,t(15,E)}function B(D){n=D,t(0,n)}function X(D){i=D,t(1,i)}return s.$$set=D=>{"data"in D&&t(0,n=D.data)},[n,i,r,o,l,a,u,c,h,d,p,f,m,b,T,E,k,I,F,Y,j,S,W,$,se,ue,K,_,O,R,Z,V,x,B,X]}class zl extends Cn{constructor(e){super(),xn(this,e,Ul,Fl,On,{data:0},null,[-1,-1])}}export{zl as component};
